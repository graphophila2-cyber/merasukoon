<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="theme-color" content="#f7f3e9" />
  <title>Memoona — My Sanctuary</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=Italiana&family=Montserrat:wght@200;300;400;500&family=Noto+Nastaliq+Urdu:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --champagne: #f7f3e9;
      --blush: #e8d5d5;
      --rose-gold: #d4a5a5;
      --terracotta: #c9a689;
      --sage: #a8b5a0;
      --charcoal: #3d3d3d;
      --warm-gray: #6b5b4f;
      --ivory: #faf8f5;
      --peach: #f5e6dc;
      --dusty-blue: #b8c4ce;
      --gold: #d4af37;
      --midnight: #2a2a35;
      --deep-night: #1a1a1e;
      --emergency: #c45c5c;
      
      --shadow-soft: 0 20px 60px rgba(0,0,0,0.08);
      --shadow-card: 0 18px 45px rgba(107, 91, 79, 0.14);
      --radius-xl: 24px;
      --radius-lg: 20px;
      --ease: cubic-bezier(0.22, 1, 0.36, 1);
      
      --sat: env(safe-area-inset-top);
      --sar: env(safe-area-inset-right);
      --sab: env(safe-area-inset-bottom);
      --sal: env(safe-area-inset-left);
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    html { scroll-behavior: smooth; -webkit-text-size-adjust: 100%; }
    body {
      margin: 0;
      font-family: "Cormorant Garamond", serif;
      background: var(--champagne);
      color: var(--charcoal);
      overflow-x: hidden;
      min-height: 100vh;
      min-height: 100dvh;
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    }

    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    #ambientCanvas {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      opacity: 0.4;
    }

    /* Navigation */
    .nav-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      padding: 0.75rem 1rem;
      padding-top: max(0.75rem, var(--sat));
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 1000;
      background: linear-gradient(to bottom, rgba(247, 243, 233, 0.98), rgba(247, 243, 233, 0.8), transparent);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }
    .logo {
      font-family: "Italiana", serif;
      font-size: clamp(1.25rem, 4vw, 1.5rem);
      color: var(--warm-gray);
      letter-spacing: 3px;
      user-select: none;
    }
    .menu-btn {
      width: 44px;
      height: 44px;
      min-width: 44px;
      min-height: 44px;
      border: none;
      background: rgba(255,255,255,0.6);
      cursor: pointer;
      display: grid;
      place-items: center;
      border-radius: 12px;
      transition: transform 0.25s var(--ease), background 0.3s;
      box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    }
    .menu-btn:active { transform: scale(0.92); background: rgba(212,165,165,0.2); }
    .menu-icon-lines {
      width: 20px;
      height: 14px;
      position: relative;
    }
    .menu-icon-lines span {
      position: absolute;
      left: 0;
      width: 100%;
      height: 2px;
      background: var(--warm-gray);
      transition: all 0.3s var(--ease);
      border-radius: 2px;
    }
    .menu-icon-lines span:nth-child(1){ top: 0; }
    .menu-icon-lines span:nth-child(2){ top: 6px; opacity: 0.9; }
    .menu-icon-lines span:nth-child(3){ top: 12px; }
    .menu-btn.active .menu-icon-lines span:nth-child(1) { top: 6px; transform: rotate(45deg); }
    .menu-btn.active .menu-icon-lines span:nth-child(2) { opacity: 0; }
    .menu-btn.active .menu-icon-lines span:nth-child(3) { top: 6px; transform: rotate(-45deg); }

    .menu-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.25);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      z-index: 998;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.35s var(--ease);
    }
    .menu-overlay.open { opacity: 1; pointer-events: auto; }

    .side-menu {
      position: fixed;
      top: 0;
      right: -100%;
      width: min(85%, 320px);
      height: 100vh;
      height: 100dvh;
      background: rgba(247, 243, 233, 0.98);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      z-index: 999;
      padding: calc(4rem + var(--sat)) 1.25rem calc(2rem + var(--sab));
      transition: right 0.4s var(--ease);
      box-shadow: -10px 0 40px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
    .side-menu.open { right: 0; }
    .menu-title {
      font-family: "Montserrat", sans-serif;
      font-size: 0.65rem;
      letter-spacing: 3px;
      text-transform: uppercase;
      color: rgba(107, 91, 79, 0.6);
      margin-bottom: 0.75rem;
      padding-left: 0.5rem;
      font-weight: 500;
    }
    .menu-item {
      font-size: 1.1rem;
      color: var(--warm-gray);
      padding: 0.875rem 0.75rem;
      border-bottom: 1px solid rgba(107, 91, 79, 0.08);
      cursor: pointer;
      transition: all 0.25s var(--ease);
      display: flex;
      align-items: center;
      gap: 0.875rem;
      border-radius: 12px;
      font-family: "Cormorant Garamond", serif;
      min-height: 44px;
    }
    .menu-item:active { background: rgba(212,165,165,0.2); transform: scale(0.98); }
    .menu-icon { font-size: 1.2rem; width: 24px; text-align: center; opacity: 0.8; }

    .sanctuary { position: relative; z-index: 10; }
    .container { 
      width: 100%; 
      padding: 0 1rem; 
      padding-inline: max(1rem, var(--sal)) max(1rem, var(--sar));
      margin-inline: auto; 
      max-width: 100%;
    }
    
    .section {
      min-height: 100vh;
      min-height: 100dvh;
      padding: 4rem 0 3rem;
      padding-top: max(4rem, calc(3rem + var(--sat)));
      display: flex;
      flex-direction: column;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }
    
    .section-header {
      text-align: center;
      margin-bottom: 2rem;
      padding-inline: 0.5rem;
    }
    .section-eyebrow {
      font-family: "Montserrat", sans-serif;
      font-size: 0.65rem;
      letter-spacing: 4px;
      text-transform: uppercase;
      color: var(--terracotta);
      margin-bottom: 0.5rem;
      display: block;
      font-weight: 500;
    }
    .section-title {
      font-family: "Italiana", serif;
      font-size: clamp(1.75rem, 7vw, 2.5rem);
      color: var(--warm-gray);
      line-height: 1.2;
      margin: 0;
    }

    .reveal {
      opacity: 0;
      transform: translateY(24px);
      transition: opacity 0.8s var(--ease), transform 0.8s var(--ease);
      will-change: opacity, transform;
    }
    .reveal.in { opacity: 1; transform: translateY(0); }

    /* HERO with dedication */
    .hero {
      min-height: 100vh;
      min-height: 100dvh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 5rem 1rem 3rem;
      padding-top: max(5rem, calc(4rem + var(--sat)));
      position: relative;
    }
    .hero-glow {
      position: absolute;
      width: min(400px, 90vw);
      height: min(400px, 90vw);
      background: radial-gradient(circle, rgba(212, 165, 165, 0.3) 0%, transparent 70%);
      border-radius: 50%;
      top: 45%;
      left: 50%;
      transform: translate(-50%, -50%);
      animation: breathe 6s ease-in-out infinite;
      pointer-events: none;
    }
    @keyframes breathe {
      0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.4; }
      50% { transform: translate(-50%, -50%) scale(1.1); opacity: 0.7; }
    }
    .hero-eyebrow {
      font-family: "Montserrat", sans-serif;
      font-size: 0.7rem;
      letter-spacing: 4px;
      text-transform: uppercase;
      color: var(--terracotta);
      margin-bottom: 1.25rem;
      font-weight: 500;
    }
    .hero-title {
      font-family: "Italiana", serif;
      font-size: clamp(3rem, 12vw, 4.5rem);
      color: var(--warm-gray);
      line-height: 1;
      margin-bottom: 0.75rem;
    }
    .hero-subtitle {
      font-size: clamp(1rem, 3.5vw, 1.25rem);
      color: var(--terracotta);
      font-style: italic;
      max-width: 90%;
      line-height: 1.7;
      margin: 0 auto 0.5rem;
      padding: 0 0.5rem;
    }
    .hero-dedication {
      font-family: "Montserrat", sans-serif;
      font-size: 0.7rem;
      letter-spacing: 3px;
      color: var(--rose-gold);
      margin-top: 1.5rem;
      opacity: 0;
      animation: fadeIn 2s ease 1s forwards;
      font-weight: 500;
    }
    @keyframes fadeIn {
      to { opacity: 1; }
    }
    .scroll-indicator {
      position: absolute;
      bottom: max(30px, var(--sab));
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      padding: 20px;
      animation: bounce 2s infinite;
      min-height: 44px;
    }
    @keyframes bounce {
      0%, 100% { transform: translateX(-50%) translateY(0); }
      50% { transform: translateX(-50%) translateY(-8px); }
    }
    .mouse {
      width: 24px;
      height: 36px;
      border: 1.5px solid var(--warm-gray);
      border-radius: 12px;
      position: relative;
      background: rgba(255,255,255,0.2);
    }
    .wheel {
      width: 3px;
      height: 3px;
      background: var(--warm-gray);
      border-radius: 50%;
      position: absolute;
      top: 6px;
      left: 50%;
      transform: translateX(-50%);
      animation: scrollWheel 2s infinite;
    }
    @keyframes scrollWheel {
      0% { top: 6px; opacity: 1; }
      100% { top: 18px; opacity: 0; }
    }

    /* Timezone with hidden confession */
    .timezone-section {
      background: linear-gradient(180deg, var(--midnight) 0%, #1f1f2e 100%);
      color: var(--champagne);
      position: relative;
    }
    .timezone-section .section-eyebrow { color: var(--gold); }
    .timezone-section .section-title { color: var(--blush); }
    .hearts-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 2rem;
      margin: 1.5rem 0;
      position: relative;
      flex-wrap: wrap;
      padding: 0 1rem;
    }
    .timezone-heart {
      text-align: center;
      position: relative;
      flex: 1;
      min-width: 120px;
      max-width: 200px;
      cursor: pointer;
      transition: transform 0.3s;
    }
    .timezone-heart:active { transform: scale(0.95); }
    .heart-beat {
      font-size: clamp(2.5rem, 8vw, 3.5rem);
      animation: heartbeat 2s infinite;
      filter: drop-shadow(0 0 20px rgba(212,165,165,0.5));
      line-height: 1;
      margin-bottom: 0.5rem;
    }
    @keyframes heartbeat {
      0%, 100% { transform: scale(1); opacity: 0.8; }
      25% { transform: scale(1.1); opacity: 1; }
      50% { transform: scale(1); opacity: 0.8; }
    }
    .heart-beat.tired {
      animation: heartbeat-tired 3s infinite;
      color: var(--rose-gold);
    }
    @keyframes heartbeat-tired {
      0%, 100% { transform: scale(1); opacity: 0.5; }
      50% { transform: scale(1.05); opacity: 0.8; }
    }
    .timezone-label {
      font-family: "Montserrat", sans-serif;
      font-size: 0.75rem;
      letter-spacing: 2px;
      margin-top: 0.75rem;
      opacity: 0.9;
      font-weight: 500;
    }
    .timezone-time {
      font-family: "Italiana", serif;
      font-size: clamp(1.25rem, 4vw, 1.5rem);
      margin-top: 0.25rem;
      opacity: 0.95;
    }
    .connection-thread {
      position: absolute;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 60px;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
      opacity: 0.6;
      animation: threadPulse 3s infinite;
      cursor: pointer;
    }
    .connection-thread:active { transform: translate(-50%, -50%) scaleX(1.2); }
    @keyframes threadPulse {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 0.8; }
    }
    .tired-badge {
      position: absolute;
      top: -5px;
      right: -10px;
      background: rgba(196, 92, 92, 0.95);
      color: white;
      padding: 0.35rem 0.75rem;
      border-radius: 20px;
      font-size: 0.65rem;
      font-family: "Montserrat", sans-serif;
      letter-spacing: 0.5px;
      opacity: 0;
      transform: scale(0.8);
      transition: all 0.3s;
      white-space: nowrap;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 10;
    }
    .tired-badge.show { opacity: 1; transform: scale(1); }

    /* Close Your Eyes Mode */
    .eyes-section {
      background: var(--deep-night);
      position: relative;
      cursor: pointer;
    }
    .eyes-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.96);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.6s;
      z-index: 2000;
      padding: 2rem;
      text-align: center;
    }
    .eyes-overlay.active {
      opacity: 1;
      pointer-events: auto;
    }
    .breath-text {
      font-family: "Italiana", serif;
      font-size: clamp(1.5rem, 6vw, 2.5rem);
      color: var(--gold);
      margin-bottom: 2rem;
      opacity: 0;
      animation: breathCycle 8s infinite;
      padding: 0 1rem;
    }
    @keyframes breathCycle {
      0%, 100% { opacity: 0.3; transform: scale(0.95); }
      50% { opacity: 1; transform: scale(1.05); }
    }
    .breath-instruction {
      color: rgba(255,255,255,0.5);
      font-family: "Montserrat", sans-serif;
      font-size: 0.8rem;
      letter-spacing: 3px;
      margin-top: 3rem;
      position: absolute;
      bottom: max(40px, var(--sab));
    }
    .eyes-trigger {
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
      width: 80px;
      height: 80px;
      border-radius: 50%;
      display: grid;
      place-items: center;
      font-size: 2rem;
      animation: pulse-glow 2s infinite;
      margin: 0 auto;
      cursor: pointer;
      transition: transform 0.3s;
    }
    .eyes-trigger:active { transform: scale(0.95); }
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 0 0 rgba(212,165,165,0.4); }
      50% { box-shadow: 0 0 0 20px rgba(212,165,165,0); }
    }

    /* Poetry Cards */
    .poetry-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1rem;
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
    }
    .poetry-card {
      background: rgba(255,255,255,0.8);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: var(--radius-lg);
      padding: 1.5rem;
      border: 1px solid rgba(212, 165, 165, 0.2);
      transition: transform 0.2s var(--ease), box-shadow 0.3s;
      cursor: pointer;
      box-shadow: 0 8px 24px rgba(107,91,79,0.06);
      position: relative;
      overflow: hidden;
    }
    .poetry-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(212,165,165,0.1) 0%, transparent 100%);
      opacity: 0;
      transition: opacity 0.3s;
    }
    .poetry-card:active { 
      transform: scale(0.98); 
      box-shadow: 0 4px 12px rgba(107,91,79,0.1);
    }
    .poetry-card:active::before { opacity: 1; }
    .card-icon { font-size: 1.75rem; margin-bottom: 0.75rem; opacity: 0.7; }
    .card-source {
      font-family: "Montserrat", sans-serif;
      font-size: 0.65rem;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--terracotta);
      margin-bottom: 0.5rem;
      font-weight: 500;
    }
    .card-content {
      font-size: 1.15rem;
      line-height: 1.7;
      color: var(--charcoal);
      font-style: italic;
      margin-bottom: 0.75rem;
    }
    .card-author {
      font-size: 0.9rem;
      color: var(--warm-gray);
    }
    .card-signature {
      margin-top: 0.75rem;
      font-family: "Montserrat", sans-serif;
      font-size: 0.65rem;
      letter-spacing: 2px;
      color: var(--rose-gold);
      text-transform: uppercase;
      font-weight: 500;
    }

    /* Modal */
    .poem-modal {
      position: fixed;
      inset: 0;
      display: none;
      z-index: 1200;
      padding: 0;
      align-items: flex-end;
      justify-content: center;
    }
    .poem-modal.open { display: flex; }
    .poem-modal__overlay {
      position: absolute;
      inset: 0;
      background: rgba(10,10,10,0.5);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }
    .poem-modal__panel {
      position: relative;
      width: 100%;
      max-height: 85vh;
      max-height: 85dvh;
      overflow-y: auto;
      background: rgba(255,255,255,0.98);
      border-radius: var(--radius-xl) var(--radius-xl) 0 0;
      padding: 1.5rem;
      padding-bottom: max(1.5rem, var(--sab));
      box-shadow: 0 -10px 60px rgba(0,0,0,0.2);
      animation: modalIn 0.4s var(--ease);
      -webkit-overflow-scrolling: touch;
    }
    @keyframes modalIn {
      from { opacity: 0; transform: translateY(100%); }
      to { opacity: 1; transform: translateY(0); }
    }
    @media (min-width: 640px) {
      .poem-modal {
        align-items: center;
        padding: 2rem;
      }
      .poem-modal__panel {
        border-radius: var(--radius-xl);
        max-width: 500px;
        max-height: 80vh;
        animation: modalInDesktop 0.4s var(--ease);
      }
      @keyframes modalInDesktop {
        from { opacity: 0; transform: translateY(30px) scale(0.95); }
        to { opacity: 1; transform: translateY(0) scale(1); }
      }
    }
    .poem-modal__close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      width: 36px;
      height: 36px;
      min-width: 36px;
      min-height: 36px;
      border-radius: 50%;
      border: none;
      background: rgba(107,91,79,0.1);
      cursor: pointer;
      font-size: 1.1rem;
      display: grid;
      place-items: center;
      transition: background 0.3s, transform 0.2s;
    }
    .poem-modal__close:active { background: rgba(107,91,79,0.2); transform: scale(0.9); }
    .poem-modal__tag {
      font-family: "Montserrat", sans-serif;
      font-size: 0.65rem;
      letter-spacing: 3px;
      text-transform: uppercase;
      color: var(--terracotta);
      margin-bottom: 0.5rem;
      font-weight: 500;
    }
    .poem-modal__title {
      font-family: "Italiana", serif;
      font-size: clamp(1.5rem, 5vw, 1.8rem);
      color: var(--warm-gray);
      margin: 0 0 1rem;
    }
    .poem-modal__body {
      white-space: pre-wrap;
      line-height: 1.9;
      font-size: 1.1rem;
      color: var(--charcoal);
      font-style: italic;
      margin-bottom: 1.5rem;
    }
    .poem-modal__actions {
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
    }
    .poem-action {
      border: none;
      background: var(--rose-gold);
      color: white;
      padding: 0.875rem 1.25rem;
      border-radius: 999px;
      font-family: "Montserrat", sans-serif;
      font-size: 0.8rem;
      cursor: pointer;
      flex: 1;
      min-width: 100px;
      min-height: 44px;
      transition: all 0.3s;
      font-weight: 500;
      letter-spacing: 0.5px;
    }
    .poem-action:active {
      transform: scale(0.98);
      box-shadow: 0 2px 10px rgba(212,165,165,0.3);
    }
    .poem-action.secondary {
      background: rgba(107,91,79,0.1);
      color: var(--warm-gray);
    }

    /* Memory Jar */
    .jar-section {
      background: linear-gradient(180deg, var(--peach) 0%, var(--champagne) 100%);
      min-height: 100vh;
      min-height: 100dvh;
    }
    .jar-container {
      position: relative;
      width: 100%;
      min-height: 350px;
      background: rgba(255,255,255,0.5);
      border-radius: var(--radius-xl);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 2px solid rgba(212,165,165,0.25);
      padding: 1.5rem 1rem;
      overflow: hidden;
    }
    .jar-visual {
      position: absolute;
      bottom: -40px;
      left: 50%;
      transform: translateX(-50%);
      width: 180px;
      height: 220px;
      background: linear-gradient(135deg, rgba(212,165,165,0.2) 0%, rgba(212,165,165,0.05) 100%);
      border-radius: 40% 40% 45% 45%;
      border: 3px solid rgba(212,165,165,0.25);
      z-index: 1;
      pointer-events: none;
      opacity: 0.5;
    }
    .jar-items {
      position: relative;
      z-index: 2;
      display: flex;
      flex-direction: column;
      gap: 0.875rem;
      max-height: 50vh;
      max-height: 50dvh;
      overflow-y: auto;
      padding-bottom: 80px;
      -webkit-overflow-scrolling: touch;
    }
    .jar-item {
      background: rgba(255,255,255,0.95);
      padding: 1rem;
      border-radius: 16px;
      border-left: 4px solid var(--rose-gold);
      box-shadow: 0 6px 20px rgba(0,0,0,0.06);
      position: relative;
      animation: jarDrop 0.5s var(--ease);
      cursor: pointer;
      transition: all 0.3s;
      touch-action: manipulation;
    }
    @keyframes jarDrop {
      0% { opacity: 0; transform: translateY(-20px) rotate(-2deg); }
      100% { opacity: 1; transform: translateY(0) rotate(0deg); }
    }
    .jar-item:active {
      transform: scale(0.98);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .jar-item-text {
      font-style: italic;
      color: var(--charcoal);
      line-height: 1.6;
      padding-right: 2rem;
      font-size: 1rem;
    }
    .jar-item-tag {
      font-family: "Montserrat", sans-serif;
      font-size: 0.6rem;
      letter-spacing: 1.5px;
      color: var(--rose-gold);
      margin-top: 0.5rem;
      text-transform: uppercase;
      font-weight: 500;
    }
    .jar-remove {
      position: absolute;
      top: 0.75rem;
      right: 0.75rem;
      width: 28px;
      height: 28px;
      min-width: 28px;
      min-height: 28px;
      border-radius: 50%;
      border: none;
      background: rgba(196,92,92,0.1);
      color: var(--emergency);
      cursor: pointer;
      display: grid;
      place-items: center;
      font-size: 1rem;
      transition: all 0.2s;
    }
    .jar-remove:active {
      background: var(--emergency);
      color: white;
      transform: rotate(90deg) scale(0.9);
    }
    .jar-empty {
      text-align: center;
      padding: 3rem 1rem;
      color: var(--warm-gray);
      font-style: italic;
      opacity: 0.8;
      font-size: 1rem;
      line-height: 1.7;
    }
    .jar-count {
      position: absolute;
      top: 0.75rem;
      right: 0.75rem;
      background: var(--rose-gold);
      color: white;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: grid;
      place-items: center;
      font-family: "Montserrat", sans-serif;
      font-size: 0.75rem;
      font-weight: 600;
      z-index: 10;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    .jar-secret {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 40px;
      height: 40px;
      opacity: 0.3;
      cursor: pointer;
      z-index: 5;
      display: grid;
      place-items: center;
      font-size: 1.2rem;
      transition: all 0.3s;
    }
    .jar-secret:active { opacity: 1; transform: translateX(-50%) scale(1.2); }

    /* Graveyard with secret */
    .graveyard-section {
      background: linear-gradient(180deg, #2a2a35 0%, #1a1a1e 100%);
      color: rgba(255,255,255,0.7);
    }
    .graveyard-section .section-eyebrow { color: var(--gold); }
    .graveyard-section .section-title { color: var(--blush); opacity: 0.9; }
    .graveyard-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.75rem;
      margin-top: 1rem;
      padding: 0 0.25rem;
    }
    @media (max-width: 380px) {
      .graveyard-grid { grid-template-columns: 1fr; }
    }
    .ghost-message {
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 16px;
      padding: 1rem 0.75rem;
      min-height: 70px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      font-style: italic;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
      touch-action: manipulation;
    }
    .ghost-message::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at center, rgba(212,165,165,0.25) 0%, transparent 70%);
      opacity: 0;
      transition: opacity 0.3s;
    }
    .ghost-message:active { transform: scale(0.98); }
    .ghost-message:active::before { opacity: 1; }
    .ghost-message.revealed {
      background: rgba(255,255,255,0.12);
      border-color: rgba(212,165,165,0.35);
      color: white;
      font-size: 0.9rem;
    }
    .ghost-message.secret-reveal {
      background: linear-gradient(135deg, rgba(212,165,165,0.2) 0%, rgba(212,165,165,0.1) 100%);
      border-color: var(--rose-gold);
      color: var(--blush);
      animation: glowPulse 2s infinite;
    }
    @keyframes glowPulse {
      0%, 100% { box-shadow: 0 0 5px rgba(212,165,165,0.3); }
      50% { box-shadow: 0 0 20px rgba(212,165,165,0.6); }
    }
    .graveyard-quote {
      text-align: center;
      margin-top: 1.5rem;
      font-style: italic;
      font-size: 1rem;
      opacity: 0.85;
      padding: 0 1rem;
      line-height: 1.7;
    }

    /* Garden - Calming invitation */
    .garden-section {
      background: linear-gradient(180deg, var(--champagne) 0%, var(--peach) 100%);
    }
    .garden-container {
      width: 100%;
      height: min(400px, 60vh);
      position: relative;
      background: rgba(255,255,255,0.5);
      border-radius: var(--radius-xl);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      border: 1px solid rgba(255,255,255,0.6);
      overflow: hidden;
      touch-action: manipulation;
      box-shadow: var(--shadow-soft);
    }
    .garden-instruction {
      position: absolute;
      top: 16px;
      left: 50%;
      transform: translateX(-50%);
      font-family: "Montserrat", sans-serif;
      font-size: 0.75rem;
      letter-spacing: 1.5px;
      color: var(--warm-gray);
      background: rgba(255,255,255,0.95);
      padding: 0.75rem 1.25rem;
      border-radius: 999px;
      border: 1px solid rgba(107,91,79,0.1);
      pointer-events: none;
      white-space: nowrap;
      z-index: 10;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      font-weight: 500;
      text-align: center;
      line-height: 1.4;
    }
    .garden-zen {
      position: absolute;
      bottom: 16px;
      left: 50%;
      transform: translateX(-50%);
      font-family: "Cormorant Garamond", serif;
      font-size: 0.9rem;
      color: var(--warm-gray);
      opacity: 0;
      transition: opacity 0.5s;
      font-style: italic;
      pointer-events: none;
    }
    .garden-zen.show { opacity: 0.8; }
    .flower {
      position: absolute;
      width: 40px;
      height: 40px;
      cursor: pointer;
      transform-origin: center bottom;
      animation: bloom 0.6s var(--ease) both;
      z-index: 5;
      pointer-events: none;
    }
    @keyframes bloom {
      0% { transform: scale(0) rotate(-140deg); opacity: 0; }
      100% { transform: scale(1) rotate(0deg); opacity: 1; }
    }
    .flower-petal {
      position: absolute;
      width: 16px;
      height: 16px;
      background: var(--rose-gold);
      border-radius: 50%;
      opacity: 0.85;
    }
    .flower-center {
      position: absolute;
      width: 12px;
      height: 12px;
      background: var(--gold);
      border-radius: 50%;
      z-index: 2;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    .flower-note {
      position: absolute;
      bottom: calc(100% + 6px);
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.98);
      padding: 0.625rem 0.875rem;
      border-radius: 12px;
      font-size: 0.85rem;
      color: var(--warm-gray);
      box-shadow: 0 8px 24px rgba(0,0,0,0.12);
      white-space: nowrap;
      border: 1px solid rgba(212,165,165,0.2);
      opacity: 0;
      animation: noteFade 3.5s forwards;
      pointer-events: none;
      z-index: 20;
      font-weight: 500;
    }
    @keyframes noteFade {
      0% { opacity: 0; transform: translateX(-50%) translateY(10px) scale(0.9); }
      15% { opacity: 1; transform: translateX(-50%) translateY(0) scale(1); }
      75% { opacity: 1; transform: translateX(-50%) translateY(0) scale(1); }
      100% { opacity: 0; transform: translateX(-50%) translateY(-10px) scale(0.9); }
    }

    /* Urdu Section - Enhanced Visibility */
    .urdu-section {
      background: linear-gradient(135deg, #2a2a35 0%, #1f1f2e 100%);
      color: var(--champagne);
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    .urdu-section::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 50% 50%, rgba(212,165,165,0.2) 0%, transparent 70%);
      animation: urduGlow 8s ease-in-out infinite alternate;
      pointer-events: none;
    }
    @keyframes urduGlow {
      0% { opacity: 0.6; transform: scale(1); }
      100% { opacity: 0.9; transform: scale(1.1); }
    }
    .urdu-section .section-eyebrow { 
      color: var(--gold); 
      position: relative;
      z-index: 2;
    }
    .urdu-section .section-title { 
      color: var(--blush); 
      position: relative;
      z-index: 2;
      font-size: clamp(1.5rem, 5vw, 2rem);
      text-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }
    .urdu-container {
      position: relative;
      z-index: 2;
      padding: 1.5rem 0.5rem;
    }
    .urdu-verse {
      font-family: "Noto Nastaliq Urdu", serif;
      font-size: clamp(1.6rem, 6.5vw, 2.4rem);
      line-height: 3;
      max-width: 100%;
      margin: 1.5rem auto;
      direction: rtl;
      color: #fff;
      text-shadow: 0 0 20px rgba(212,165,165,0.5), 0 0 40px rgba(212,165,165,0.3);
      animation: verseFloat 6s ease-in-out infinite;
      position: relative;
      padding: 1rem;
      font-weight: 500;
    }
    .urdu-verse::before {
      content: "";
      position: absolute;
      inset: -20px;
      background: radial-gradient(circle, rgba(212,165,165,0.25) 0%, transparent 70%);
      z-index: -1;
      filter: blur(30px);
      animation: verseGlow 4s ease-in-out infinite alternate;
      pointer-events: none;
    }
    @keyframes verseFloat {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }
    @keyframes verseGlow {
      0% { opacity: 0.6; }
      100% { opacity: 1; }
    }
    .urdu-line {
      display: block;
      margin: 0.5rem 0;
      opacity: 0;
      animation: lineReveal 1.5s ease forwards;
      background: linear-gradient(to bottom, #ffffff 0%, #f0e6e6 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
    }
    .urdu-line:nth-child(1) { animation-delay: 0.3s; }
    .urdu-line:nth-child(2) { animation-delay: 0.8s; }
    @keyframes lineReveal {
      0% { opacity: 0; transform: translateY(20px); filter: blur(10px); }
      100% { opacity: 1; transform: translateY(0); filter: blur(0); }
    }
    .urdu-divider {
      width: 50px;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
      margin: 1.5rem auto;
      opacity: 0.8;
      position: relative;
    }
    .urdu-divider::before {
      content: "✦";
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      color: var(--rose-gold);
      font-size: 1rem;
      background: #2a2a35;
      padding: 0 0.75rem;
    }
    .urdu-transliteration {
      font-size: 1rem;
      font-style: italic;
      opacity: 0.95;
      margin-top: 1.5rem;
      color: var(--blush);
      letter-spacing: 1px;
      position: relative;
      z-index: 2;
      line-height: 1.8;
      padding: 0 1rem;
      text-shadow: 0 1px 2px rgba(0,0,0,0.3);
    }
    .urdu-meaning {
      font-size: 0.95rem;
      opacity: 0.9;
      margin-top: 1.25rem;
      max-width: 95%;
      margin-inline: auto;
      line-height: 1.8;
      color: rgba(255,255,255,0.95);
      position: relative;
      z-index: 2;
      font-style: italic;
      padding: 0 0.5rem;
      text-shadow: 0 1px 3px rgba(0,0,0,0.3);
    }
    .urdu-poet {
      font-family: "Montserrat", sans-serif;
      font-size: 0.7rem;
      letter-spacing: 3px;
      text-transform: uppercase;
      color: var(--rose-gold);
      margin-top: 1.5rem;
      position: relative;
      z-index: 2;
      opacity: 0.95;
      font-weight: 500;
    }
    .floating-petal {
      position: absolute;
      font-size: 1.25rem;
      opacity: 0.4;
      animation: petalFloat 10s infinite linear;
      pointer-events: none;
      z-index: 1;
      filter: drop-shadow(0 0 5px rgba(212,165,165,0.5));
    }
    @keyframes petalFloat {
      0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
      10% { opacity: 0.4; }
      90% { opacity: 0.4; }
      100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
    }

    /* Nights You Guard - Fixed positioning */
    .nights-section {
      background: linear-gradient(180deg, var(--midnight) 0%, var(--deep-night) 100%);
      color: var(--champagne);
    }
    .nights-section .section-eyebrow { color: var(--gold); }
    .nights-section .section-title { color: var(--blush); }
    .night-sky {
      width: 100%;
      height: min(450px, 60vh);
      position: relative;
      border-radius: var(--radius-xl);
      overflow: hidden;
      border: 1px solid rgba(212,165,165,0.15);
      background: radial-gradient(ellipse at bottom, rgba(212,165,165,0.1) 0%, transparent 70%);
      touch-action: manipulation;
    }
    .star {
      position: absolute;
      width: 44px;
      height: 44px;
      min-width: 44px;
      min-height: 44px;
      cursor: pointer;
      display: grid;
      place-items: center;
      z-index: 5;
      touch-action: manipulation;
    }
    .star::before {
      content: "✦";
      color: var(--gold);
      font-size: 1.1rem;
      animation: twinkle 3s infinite;
      filter: drop-shadow(0 0 8px rgba(212,165,165,0.8));
      pointer-events: none;
    }
    @keyframes twinkle {
      0%, 100% { opacity: 0.4; transform: scale(0.8); }
      50% { opacity: 1; transform: scale(1.2); }
    }
    .sky-instruction {
      position: absolute;
      top: 16px;
      left: 50%;
      transform: translateX(-50%);
      font-family: "Montserrat", sans-serif;
      font-size: 0.65rem;
      letter-spacing: 2px;
      color: rgba(255,255,255,0.6);
      background: rgba(0,0,0,0.3);
      padding: 0.625rem 1rem;
      border-radius: 999px;
      white-space: nowrap;
      z-index: 10;
      font-weight: 500;
      pointer-events: none;
    }

    /* Necklace of Moments */
    .necklace-section {
      background: linear-gradient(135deg, var(--ivory) 0%, var(--champagne) 100%);
    }
    .necklace-container {
      width: 100%;
      height: 160px;
      position: relative;
      margin: 1.5rem 0;
      overflow-x: auto;
      overflow-y: hidden;
      display: flex;
      align-items: center;
      padding: 0 1.5rem;
      gap: 1.5rem;
      scrollbar-width: none;
      -ms-overflow-style: none;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
    }
    .necklace-container::-webkit-scrollbar { display: none; }
    .moment-bead {
      flex-shrink: 0;
      width: 56px;
      height: 56px;
      min-width: 56px;
      min-height: 56px;
      border-radius: 50%;
      background: rgba(255,255,255,0.95);
      border: 2px solid var(--rose-gold);
      box-shadow: 0 8px 25px rgba(212,165,165,0.25);
      display: grid;
      place-items: center;
      cursor: pointer;
      position: relative;
      transition: transform 0.2s;
      scroll-snap-align: center;
      touch-action: manipulation;
    }
    .moment-bead:active { transform: scale(0.92); }
    .moment-time {
      font-family: "Montserrat", sans-serif;
      font-size: 0.55rem;
      text-align: center;
      line-height: 1.3;
      color: var(--warm-gray);
      font-weight: 600;
    }
    .moment-thread {
      position: absolute;
      top: 50%;
      right: -1.5rem;
      width: 1.5rem;
      height: 2px;
      background: linear-gradient(90deg, var(--rose-gold), transparent);
      transform: translateY(-50%);
    }
    .moment-glow {
      position: absolute;
      inset: -4px;
      border-radius: 50%;
      border: 2px solid var(--gold);
      opacity: 0;
      animation: beadGlow 3s infinite;
      pointer-events: none;
    }
    @keyframes beadGlow {
      0%, 100% { opacity: 0; transform: scale(1); }
      50% { opacity: 0.5; transform: scale(1.1); }
    }
    .moment-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255,255,255,0.98);
      padding: 1.25rem;
      border-radius: 20px;
      width: min(85%, 280px);
      box-shadow: 0 20px 60px rgba(0,0,0,0.25);
      border: 1px solid rgba(212,165,165,0.3);
      z-index: 2000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s, transform 0.3s;
      text-align: center;
    }
    .moment-popup.show {
      opacity: 1;
      pointer-events: auto;
      transform: translate(-50%, -50%) scale(1);
    }
    .moment-popup h4 {
      margin: 0 0 0.5rem;
      color: var(--rose-gold);
      font-family: "Italiana", serif;
      font-size: 1.3rem;
    }
    .moment-popup p {
      margin: 0;
      font-style: italic;
      color: var(--charcoal);
      line-height: 1.6;
      font-size: 0.95rem;
    }

    /* Distance Map with secret */
    .map-section {
      background: var(--ivory);
      position: relative;
    }
    .map-visual {
      width: 100%;
      height: min(350px, 50vh);
      position: relative;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 1.5rem;
    }
    .map-city {
      text-align: center;
      z-index: 2;
    }
    .city-dot {
      width: 18px;
      height: 18px;
      background: var(--rose-gold);
      border-radius: 50%;
      margin: 0 auto 0.75rem;
      box-shadow: 0 0 18px rgba(212,165,165,0.6);
      animation: cityPulse 2s infinite;
    }
    @keyframes cityPulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.2); opacity: 0.8; }
    }
    .city-name {
      font-family: "Italiana", serif;
      font-size: 1.1rem;
      color: var(--warm-gray);
    }
    .map-thread {
      position: absolute;
      top: 50%;
      left: 15%;
      right: 15%;
      height: 2px;
      background: linear-gradient(90deg, var(--rose-gold), var(--gold), var(--rose-gold));
      background-size: 200% 100%;
      animation: threadShimmer 3s infinite;
      opacity: 0.6;
      cursor: pointer;
      transition: all 0.3s;
    }
    .map-thread:active { height: 3px; opacity: 1; }
    @keyframes threadShimmer {
      0% { background-position: 0% 50%; }
      100% { background-position: 200% 50%; }
    }
    .map-kiss {
      position: absolute;
      top: 42%;
      left: 50%;
      transform: translateX(-50%);
      font-size: 1.25rem;
      opacity: 0;
      animation: kissFloat 4s infinite;
      cursor: pointer;
    }
    .map-kiss:active { transform: translateX(-50%) scale(1.3); }
    @keyframes kissFloat {
      0%, 100% { opacity: 0; transform: translateX(-50%) translateY(0); }
      50% { opacity: 0.6; transform: translateX(-50%) translateY(-15px); }
    }
    .distance-stats {
      display: flex;
      justify-content: center;
      margin-top: 1.5rem;
      padding: 0 0.5rem;
    }
    .stat-box {
      background: rgba(255,255,255,0.9);
      padding: 1.25rem 1.75rem;
      border-radius: var(--radius-lg);
      text-align: center;
      border: 1px solid rgba(212,165,165,0.22);
      min-width: 140px;
      box-shadow: var(--shadow-soft);
    }
    .stat-number {
      font-family: "Italiana", serif;
      font-size: 2rem;
      color: var(--rose-gold);
      display: block;
      margin-bottom: 0.25rem;
    }
    .stat-label {
      font-family: "Montserrat", sans-serif;
      font-size: 0.75rem;
      color: var(--warm-gray);
      letter-spacing: 1px;
    }

    /* Hands */
    .hands-section {
      background: linear-gradient(180deg, var(--ivory) 0%, #f0e8e0 100%);
      position: relative;
    }
    .hand-container {
      width: 100%;
      max-width: 340px;
      margin: 0 auto;
      position: relative;
      padding: 2rem 0;
      min-height: 400px;
    }
    .hand-particle {
      position: absolute;
      width: 5px;
      height: 5px;
      background: var(--rose-gold);
      border-radius: 50%;
      opacity: 0.3;
      animation: floatParticle 8s infinite ease-in-out;
      pointer-events: none;
    }
    @keyframes floatParticle {
      0%, 100% { transform: translateY(0) translateX(0); opacity: 0.3; }
      50% { transform: translateY(-25px) translateX(8px); opacity: 0.6; }
    }
    .hand-svg-container {
      position: relative;
      width: 100%;
      height: 320px;
      filter: drop-shadow(0 15px 30px rgba(212,165,165,0.2));
      animation: handFloat 6s ease-in-out infinite;
    }
    @keyframes handFloat {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-10px) rotate(0.5deg); }
    }
    .hand-zone {
      position: absolute;
      width: 50px;
      height: 50px;
      min-width: 44px;
      min-height: 44px;
      border-radius: 50%;
      cursor: pointer;
      display: grid;
      place-items: center;
      transition: all 0.3s;
      touch-action: manipulation;
    }
    .hand-zone::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: 50%;
      border: 2px solid var(--rose-gold);
      opacity: 0.4;
      transform: scale(0.8);
      transition: all 0.3s;
    }
    .hand-zone::after {
      content: "✦";
      color: var(--rose-gold);
      font-size: 1.2rem;
      opacity: 0;
      transform: scale(0);
      transition: all 0.3s;
      pointer-events: none;
    }
    .hand-zone:active::before, .hand-zone.active::before {
      transform: scale(1.3);
      opacity: 0;
    }
    .hand-zone:active::after, .hand-zone.active::after {
      opacity: 1;
      transform: scale(1);
    }
    .hand-popup {
      position: fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255,255,255,0.98);
      padding: 1.25rem;
      border-radius: 20px;
      width: min(280px, 80vw);
      font-size: 1rem;
      color: var(--charcoal);
      line-height: 1.7;
      box-shadow: 0 20px 50px rgba(0,0,0,0.2);
      border: 1px solid rgba(212,165,165,0.3);
      font-style: italic;
      text-align: center;
      opacity: 0;
      animation: handPopupFade 4s forwards;
      pointer-events: none;
      z-index: 3000;
      margin-top: 0;
    }
    @keyframes handPopupFade {
      0% { opacity: 0; transform: translate(-50%, -40%) scale(0.9); }
      15% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
      70% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
      100% { opacity: 0; transform: translate(-50%, -60%) scale(0.9); }
    }

    /* Face Cartography */
    .face-section {
      background: linear-gradient(135deg, var(--peach) 0%, var(--blush) 100%);
    }
    .face-map-container {
      position: relative;
      width: min(280px, 75vw);
      height: min(360px, 95vw);
      margin: 0 auto;
    }
    .face-map {
      width: 100%;
      height: 100%;
      background: rgba(255,255,255,0.6);
      border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
      position: relative;
      border: 2px solid rgba(212,165,165,0.2);
      box-shadow: inset 0 0 50px rgba(212,165,165,0.15), 0 15px 40px rgba(0,0,0,0.08);
    }
    .face-feature {
      position: absolute;
      width: 40px;
      height: 40px;
      min-width: 44px;
      min-height: 44px;
      border-radius: 50%;
      background: rgba(255,255,255,0.95);
      border: 2px solid rgba(212,165,165,0.4);
      cursor: pointer;
      display: grid;
      place-items: center;
      transition: all 0.2s;
      box-shadow: 0 4px 12px rgba(212,165,165,0.2);
      animation: featurePulse 3s infinite;
      z-index: 10;
      touch-action: manipulation;
    }
    @keyframes featurePulse {
      0%, 100% { transform: scale(1); box-shadow: 0 4px 12px rgba(212,165,165,0.2); }
      50% { transform: scale(1.05); box-shadow: 0 6px 16px rgba(212,165,165,0.3); }
    }
    .face-feature::before {
      content: "✦";
      color: var(--rose-gold);
      font-size: 1rem;
      pointer-events: none;
    }
    .face-feature:active { transform: scale(0.9); }
    
    .face-tooltip {
      position: fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255,255,255,0.98);
      padding: 1.25rem;
      border-radius: 18px;
      width: min(260px, 85vw);
      font-size: 0.95rem;
      color: var(--charcoal);
      line-height: 1.7;
      box-shadow: 0 20px 60px rgba(0,0,0,0.25);
      border: 1px solid rgba(212,165,165,0.3);
      font-style: italic;
      text-align: center;
      opacity: 0;
      animation: faceTooltipFade 4s forwards;
      pointer-events: none;
      z-index: 3000;
      margin-top: 0;
    }
    @keyframes faceTooltipFade {
      0% { opacity: 0; transform: translate(-50%, -45%) scale(0.9); }
      15% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
      70% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
      100% { opacity: 0; transform: translate(-50%, -55%) scale(0.9); }
    }

    /* Virtual Touch */
    .touch-section {
      background: linear-gradient(135deg, var(--blush) 0%, var(--peach) 100%);
    }
    .touch-arena {
      width: 100%;
      height: min(350px, 50vh);
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 3rem;
      padding: 0 2rem;
    }
    .touch-orb {
      width: 80px;
      height: 80px;
      min-width: 80px;
      min-height: 80px;
      border-radius: 50%;
      background: rgba(255,255,255,0.95);
      box-shadow: 0 15px 40px rgba(212,165,165,0.35);
      display: grid;
      place-items: center;
      font-family: "Italiana", serif;
      color: var(--warm-gray);
      cursor: pointer;
      transition: all 0.3s;
      position: relative;
      z-index: 5;
      font-size: 0.9rem;
      touch-action: manipulation;
      user-select: none;
    }
    .touch-orb:active { transform: scale(0.95); }
    .touch-orb.touched {
      background: var(--rose-gold);
      color: white;
      transform: scale(1.08);
      box-shadow: 0 20px 50px rgba(212,165,165,0.5);
    }
    .touch-line {
      position: absolute;
      width: 80px;
      height: 3px;
      background: transparent;
      transition: all 0.5s;
      z-index: 1;
    }
    .touch-line.connected {
      background: linear-gradient(90deg, var(--rose-gold), var(--gold));
      box-shadow: 0 0 20px rgba(212,165,165,0.8);
      animation: touchPulse 1s infinite;
    }
    @keyframes touchPulse {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 1; }
    }
    .touch-message {
      position: absolute;
      bottom: 60px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.98);
      padding: 0.875rem 1.25rem;
      border-radius: 16px;
      font-style: italic;
      color: var(--warm-gray);
      opacity: 0;
      transition: opacity 0.3s;
      pointer-events: none;
      box-shadow: 0 10px 30px rgba(0,0,0,0.12);
      font-size: 0.95rem;
      white-space: nowrap;
    }
    .touch-message.show { opacity: 1; }

    /* Sleep Stories */
    .stories-section {
      background: linear-gradient(180deg, var(--champagne) 0%, var(--ivory) 100%);
    }
    .book-container {
      width: 100%;
      max-width: 320px;
      margin: 0 auto;
      background: rgba(255,255,255,0.95);
      border-radius: 8px 16px 16px 8px;
      padding: 1.5rem;
      box-shadow: 0 15px 50px rgba(0,0,0,0.08), inset 15px 0 30px rgba(0,0,0,0.04);
      border-left: 12px solid var(--rose-gold);
      position: relative;
    }
    .book-page {
      display: none;
      min-height: 200px;
    }
    .book-page.active {
      display: block;
      animation: pageTurn 0.5s var(--ease);
    }
    @keyframes pageTurn {
      0% { opacity: 0; transform: translateX(-15px); }
      100% { opacity: 1; transform: translateX(0); }
    }
    .story-title {
      font-family: "Italiana", serif;
      font-size: 1.3rem;
      color: var(--warm-gray);
      margin-bottom: 0.75rem;
    }
    .story-text {
      font-style: italic;
      line-height: 1.8;
      color: var(--charcoal);
      font-size: 1rem;
    }
    .book-nav {
      display: flex;
      justify-content: space-between;
      margin-top: 1.5rem;
      padding-top: 1rem;
      border-top: 1px solid rgba(212,165,165,0.2);
    }
    .book-btn {
      border: none;
      background: none;
      color: var(--rose-gold);
      font-family: "Montserrat", sans-serif;
      font-size: 0.75rem;
      cursor: pointer;
      padding: 0.5rem;
      min-height: 44px;
      font-weight: 500;
      letter-spacing: 0.5px;
      transition: opacity 0.3s;
    }
    .book-btn:active { opacity: 0.6; }

    /* Virtues */
    .virtues-section {
      background: linear-gradient(180deg, var(--champagne) 0%, var(--ivory) 100%);
    }
    .crystals-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.75rem;
      margin-top: 1rem;
    }
    @media (max-width: 360px) {
      .crystals-grid { grid-template-columns: 1fr; }
    }
    .crystal {
      background: rgba(255,255,255,0.8);
      border-radius: var(--radius-lg);
      padding: 1.25rem 1rem;
      text-align: center;
      border: 1px solid rgba(212,165,165,0.2);
      cursor: pointer;
      transition: all 0.3s;
      touch-action: manipulation;
    }
    .crystal:active { transform: scale(0.96); background: rgba(212,165,165,0.2); }
    .crystal-icon {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      display: block;
    }
    .crystal-name {
      font-family: "Italiana", serif;
      font-size: 1.2rem;
      color: var(--warm-gray);
    }
    .virtue-story {
      margin-top: 1.5rem;
      background: rgba(255,255,255,0.95);
      border-radius: var(--radius-xl);
      padding: 1.25rem;
      border: 1px solid rgba(212,165,165,0.2);
      font-size: 1rem;
      line-height: 1.8;
      color: var(--warm-gray);
      font-style: italic;
      text-align: center;
      min-height: 80px;
      display: grid;
      place-items: center;
      box-shadow: var(--shadow-soft);
    }

    /* Promise of Firsts */
    .promises-section {
      background: linear-gradient(135deg, var(--dusty-blue) 0%, var(--blush) 100%);
    }
    .firsts-grid {
      display: grid;
      gap: 0.75rem;
      margin-top: 1rem;
    }
    .first-item {
      background: rgba(255,255,255,0.85);
      padding: 1rem;
      border-radius: var(--radius-lg);
      display: flex;
      align-items: center;
      gap: 0.875rem;
      border: 1px solid rgba(212,165,165,0.2);
      transition: all 0.3s;
      touch-action: manipulation;
    }
    .first-item.complete {
      background: rgba(212,165,165,0.25);
      border-color: var(--rose-gold);
    }
    .first-checkbox {
      width: 28px;
      height: 28px;
      min-width: 28px;
      min-height: 28px;
      border: 2px solid var(--rose-gold);
      border-radius: 50%;
      display: grid;
      place-items: center;
      flex-shrink: 0;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 0.9rem;
      color: white;
    }
    .first-checkbox.checked {
      background: var(--rose-gold);
    }
    .first-text {
      font-size: 1rem;
      color: var(--warm-gray);
      line-height: 1.5;
    }
    .first-item.complete .first-text {
      text-decoration: line-through;
      opacity: 0.6;
    }

    /* Journey */
    .journey-section {
      background: linear-gradient(180deg, rgba(255,245,238,1) 0%, rgba(245,232,228,1) 100%);
    }
    .journey-timeline {
      background: rgba(255,255,255,0.7);
      border: 1px solid rgba(212,165,165,0.2);
      border-radius: var(--radius-xl);
      padding: 1rem;
      box-shadow: var(--shadow-soft);
    }
    .journey-entry {
      display: grid;
      grid-template-columns: 32px 1fr;
      gap: 0.875rem;
      padding: 1rem 0;
      position: relative;
    }
    .journey-entry:not(:last-child)::after {
      content: "";
      position: absolute;
      left: 15px;
      top: 48px;
      bottom: 0;
      width: 2px;
      background: rgba(212,165,165,0.3);
    }
    .journey-dot {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: var(--rose-gold);
      box-shadow: 0 4px 15px rgba(212,165,165,0.3);
      display: grid;
      place-items: center;
      color: white;
      font-size: 0.85rem;
      z-index: 2;
      font-family: "Italiana", serif;
    }
    .journey-content h3 {
      margin: 0 0 0.25rem;
      font-family: "Italiana", serif;
      color: var(--warm-gray);
      font-size: 1.1rem;
    }
    .journey-content p {
      margin: 0;
      font-size: 0.95rem;
      color: var(--warm-gray);
      opacity: 0.9;
      line-height: 1.5;
    }

    /* Letter */
    .letter-section { background: var(--ivory); }
    .envelope-container {
      perspective: 1000px;
      width: min(280px, 80vw);
      height: 180px;
      margin: 0 auto;
      cursor: pointer;
    }
    .envelope {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s var(--ease);
    }
    .envelope.open { transform: rotateX(180deg); }
    .envelope-front {
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, var(--blush) 0%, var(--rose-gold) 100%);
      border-radius: 0 0 10px 10px;
      display: grid;
      place-items: center;
      backface-visibility: hidden;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(255,255,255,0.4);
    }
    .seal {
      width: 44px;
      height: 44px;
      background: var(--gold);
      border-radius: 50%;
      display: grid;
      place-items: center;
      font-size: 1.25rem;
      box-shadow: 0 6px 16px rgba(0,0,0,0.15);
    }
    .envelope-back {
      position: absolute;
      inset: 0;
      background: var(--blush);
      border-radius: 10px;
      transform: rotateX(180deg);
      backface-visibility: hidden;
      padding: 0.5rem;
      display: grid;
      place-items: center;
      overflow: hidden;
    }
    .letter-paper {
      width: 100%;
      height: 100%;
      background: rgba(255,255,255,0.98);
      border-radius: 8px;
      padding: 1rem;
      overflow-y: auto;
      text-align: left;
      box-shadow: 0 6px 16px rgba(0,0,0,0.1);
      -webkit-overflow-scrolling: touch;
    }

    /* Emergency Protocol */
    .emergency-btn {
      position: fixed;
      bottom: max(20px, var(--sab));
      right: max(20px, var(--sar));
      width: 50px;
      height: 50px;
      min-width: 44px;
      min-height: 44px;
      border-radius: 50%;
      background: rgba(196, 92, 92, 0.9);
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      z-index: 900;
      opacity: 0.2;
      transition: opacity 0.3s, transform 0.2s;
      display: grid;
      place-items: center;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      touch-action: manipulation;
      overflow: hidden;
    }
    .emergency-btn.visible { opacity: 1; }
    .emergency-btn:active { transform: scale(0.95); }
    .emergency-progress {
      position: absolute;
      inset: 0;
      background: conic-gradient(rgba(255,255,255,0.3) var(--progress, 0%), transparent 0%);
      border-radius: 50%;
      opacity: 0;
      transition: opacity 0.3s;
    }
    .emergency-btn.holding .emergency-progress {
      opacity: 1;
    }
    .emergency-overlay {
      position: fixed;
      inset: 0;
      background: rgba(196, 92, 92, 0.96);
      z-index: 3000;
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 2rem;
      text-align: center;
      color: white;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .emergency-overlay.active { display: flex; }
    .emergency-text {
      font-family: "Italiana", serif;
      font-size: clamp(1.5rem, 6vw, 2rem);
      margin-bottom: 1.5rem;
      line-height: 1.4;
      padding: 0 1rem;
    }
    .emergency-heart {
      font-size: 3.5rem;
      margin: 1rem 0;
      animation: heartbeat 1.5s infinite;
    }
    .emergency-instruction {
      font-size: 0.9rem;
      opacity: 0.8;
      margin-top: 2rem;
      font-family: "Montserrat", sans-serif;
      letter-spacing: 1px;
    }

    /* FINAL - Enhanced with rich wishes */
    .final-section {
      min-height: 100vh;
      min-height: 100dvh;
      background: linear-gradient(180deg, var(--ivory) 0%, var(--blush) 100%);
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 3rem 1rem;
      padding-bottom: max(3rem, var(--sab));
      text-align: center;
    }
    .final-card {
      background: rgba(255,255,255,0.85);
      border-radius: var(--radius-xl);
      padding: 2rem 1.25rem;
      box-shadow: 0 25px 70px rgba(107,91,79,0.12);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.8);
      position: relative;
      overflow: hidden;
    }
    .final-glow {
      position: absolute;
      inset: -20%;
      background: radial-gradient(circle, rgba(212,165,165,0.25) 0%, transparent 60%);
      animation: slowGlow 12s ease-in-out infinite alternate;
      pointer-events: none;
    }
    @keyframes slowGlow {
      from { transform: translateX(-20%); }
      to { transform: translateX(20%); }
    }
    .final-badge {
      display: inline-block;
      font-family: "Montserrat", sans-serif;
      font-size: 0.65rem;
      letter-spacing: 3px;
      text-transform: uppercase;
      color: rgba(107,91,79,0.7);
      background: rgba(255,255,255,0.9);
      border: 1px solid rgba(107,91,79,0.1);
      padding: 0.5rem 0.875rem;
      border-radius: 999px;
      margin-bottom: 1.25rem;
      position: relative;
      z-index: 1;
      font-weight: 500;
    }
    .final-title {
      font-family: "Italiana", serif;
      font-size: clamp(1.75rem, 7vw, 2.5rem);
      color: var(--warm-gray);
      margin: 0 0 1.25rem;
      position: relative;
      z-index: 1;
    }
    .final-verse {
      font-size: 1.05rem;
      line-height: 1.9;
      color: var(--charcoal);
      margin: 0 0 1.5rem;
      font-style: italic;
      opacity: 0.9;
      position: relative;
      z-index: 1;
      padding: 0 0.5rem;
    }
    .final-promises {
      display: grid;
      gap: 0.625rem;
      margin: 1.25rem 0;
      position: relative;
      z-index: 1;
    }
    .promise {
      background: rgba(255,255,255,0.95);
      border: 1px solid rgba(107,91,79,0.1);
      border-radius: 12px;
      padding: 0.875rem;
      color: var(--warm-gray);
      line-height: 1.6;
      font-size: 0.95rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    }
    .blessing-container {
      position: relative;
      z-index: 1;
      margin: 1.5rem 0;
      padding: 1.5rem 1rem;
      background: rgba(255,255,255,0.6);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(212,165,165,0.2);
    }
    .blessing-urdu {
      font-family: "Noto Nastaliq Urdu", serif;
      font-size: 1.4rem;
      color: var(--warm-gray);
      direction: rtl;
      line-height: 2.2;
      margin-bottom: 1rem;
      text-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }
    .blessing-text {
      font-size: 0.95rem;
      color: var(--warm-gray);
      line-height: 1.9;
      font-style: italic;
      margin: 0.5rem 0;
    }
    .final-actions {
      display: flex;
      justify-content: center;
      gap: 0.875rem;
      margin-top: 1.5rem;
      flex-wrap: wrap;
      position: relative;
      z-index: 1;
    }
    .heart-btn {
      width: 60px;
      height: 60px;
      min-width: 44px;
      min-height: 44px;
      border-radius: 50%;
      background: var(--rose-gold);
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      box-shadow: 0 12px 30px rgba(212,165,165,0.4);
      animation: pulse 2s infinite;
      display: grid;
      place-items: center;
      touch-action: manipulation;
      transition: transform 0.2s;
    }
    .heart-btn:active { transform: scale(0.95); }
    @keyframes pulse {
      0%, 100% { transform: scale(1); box-shadow: 0 12px 30px rgba(212,165,165,0.4); }
      50% { transform: scale(1.05); box-shadow: 0 15px 35px rgba(212,165,165,0.5); }
    }
    .final-hidden {
      margin-top: 1.25rem;
      font-size: 1.1rem;
      color: var(--warm-gray);
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.5s;
      position: relative;
      z-index: 1;
      font-style: italic;
    }
    .final-hidden.show { opacity: 1; transform: translateY(0); }
    .copy-btn {
      border: none;
      background: rgba(107,91,79,0.1);
      padding: 0.875rem 1.25rem;
      border-radius: 999px;
      font-family: "Montserrat", sans-serif;
      color: var(--warm-gray);
      font-size: 0.85rem;
      cursor: pointer;
      min-height: 44px;
      font-weight: 500;
      transition: all 0.3s;
    }
    .copy-btn:active { background: rgba(107,91,79,0.2); transform: scale(0.98); }
    .creator-sign {
      margin-top: 2rem;
      font-family: "Cormorant Garamond", serif;
      font-size: 0.95rem;
      color: var(--rose-gold);
      font-style: italic;
      position: relative;
      z-index: 1;
      letter-spacing: 1px;
    }

    /* Toast */
    .toast {
      position: fixed;
      left: 50%;
      bottom: max(30px, var(--sab));
      transform: translateX(-50%) translateY(20px);
      background: rgba(255,255,255,0.98);
      border: 1px solid rgba(212,165,165,0.3);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 999px;
      padding: 0.875rem 1.5rem;
      font-family: "Montserrat", sans-serif;
      font-size: 0.85rem;
      color: var(--warm-gray);
      box-shadow: 0 15px 40px rgba(0,0,0,0.15);
      opacity: 0;
      pointer-events: none;
      transition: all 0.35s;
      z-index: 1400;
      white-space: nowrap;
      max-width: 90vw;
      text-align: center;
      font-weight: 500;
    }
    .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

    /* Floating Hearts */
    .floating-heart {
      position: fixed;
      pointer-events: none;
      color: var(--rose-gold);
      z-index: 700;
      font-size: 1.25rem;
      animation: heart-rise 3s ease-out forwards;
    }
    @keyframes heart-rise {
      0% { opacity: 0; transform: translateY(0) scale(0.5); }
      20% { opacity: 1; transform: translateY(-30px) scale(1); }
      100% { opacity: 0; transform: translateY(-250px) scale(0.8); }
    }

    /* Secret confession modal */
    .secret-modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.85);
      backdrop-filter: blur(10px);
      z-index: 5000;
      display: none;
      place-items: center;
      padding: 2rem;
      text-align: center;
    }
    .secret-modal.show { display: grid; }
    .secret-content {
      background: linear-gradient(135deg, rgba(212,165,165,0.2) 0%, rgba(255,255,255,0.1) 100%);
      border: 1px solid rgba(212,165,165,0.4);
      border-radius: var(--radius-xl);
      padding: 2rem 1.5rem;
      max-width: 400px;
      animation: secretIn 0.5s var(--ease);
      color: white;
    }
    @keyframes secretIn {
      from { opacity: 0; transform: scale(0.8) translateY(20px); }
      to { opacity: 1; transform: scale(1) translateY(0); }
    }
    .secret-title {
      font-family: "Italiana", serif;
      font-size: 1.5rem;
      color: var(--blush);
      margin-bottom: 1rem;
    }
    .secret-text {
      font-style: italic;
      line-height: 1.9;
      font-size: 1.1rem;
      margin-bottom: 1.5rem;
    }
    .secret-close {
      background: rgba(255,255,255,0.2);
      border: 1px solid rgba(255,255,255,0.3);
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 999px;
      font-family: "Montserrat", sans-serif;
      cursor: pointer;
      font-size: 0.85rem;
    }

    /* Utility */
    .text-center { text-align: center; }
    .mt-2 { margin-top: 2rem; }
    
    .menu-btn, .poetry-card, .jar-item, .ghost-message, .moment-bead, 
    .hand-zone, .face-feature, .touch-orb, .crystal, .first-checkbox,
    .book-btn, .heart-btn, .copy-btn, .eyes-trigger, .star, .timezone-heart {
      user-select: none;
      -webkit-user-select: none;
    }
  </style>
</head>
<body>

  <canvas id="ambientCanvas"></canvas>

  <!-- Secret Modal -->
  <div class="secret-modal" id="secretModal">
    <div class="secret-content">
      <div class="secret-title" id="secretTitle">A Whisper</div>
      <div class="secret-text" id="secretText">Secret message here</div>
      <button class="secret-close" onclick="closeSecret()">Close ✦</button>
    </div>
  </div>

  <!-- Emergency Button -->
  <button class="emergency-btn" id="emergencyBtn" aria-label="Emergency calm">
    <span style="position: relative; z-index: 2;">!</span>
    <div class="emergency-progress" id="emergencyProgress"></div>
  </button>
  <div class="emergency-overlay" id="emergencyOverlay">
    <div class="emergency-text">Look at me.<br>Breathe.<br>I am real.<br>I am coming.</div>
    <div class="emergency-heart">♥</div>
    <div class="emergency-instruction">Tap anywhere to return</div>
  </div>

  <!-- Moment Popup -->
  <div class="moment-popup" id="momentPopup">
    <h4 id="momentTitle">Time</h4>
    <p id="momentText">Story</p>
  </div>

  <!-- Global Tooltip Container -->
  <div id="global-tooltip-container" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 2500;"></div>

  <header class="nav-bar">
    <div class="logo">Memoona</div>
    <button class="menu-btn" id="menuBtn" aria-label="Menu" aria-expanded="false">
      <div class="menu-icon-lines">
        <span></span><span></span><span></span>
      </div>
    </button>
  </header>

  <div class="menu-overlay" id="menuOverlay"></div>

  <aside class="side-menu" id="sideMenu" aria-hidden="true">
    <div class="menu-title">Navigate</div>
    <div class="menu-item" data-target="#top"><span class="menu-icon">⌂</span>Home</div>
    <div class="menu-item" data-target="#timezone"><span class="menu-icon">◷</span>Our Time</div>
    <div class="menu-item" data-target="#eyes"><span class="menu-icon">◎</span>Close Your Eyes</div>
    <div class="menu-item" data-target="#poetry"><span class="menu-icon">✦</span>Poetry</div>
    <div class="menu-item" data-target="#jar"><span class="menu-icon">⚱</span>Memory Jar</div>
    <div class="menu-item" data-target="#graveyard"><span class="menu-icon">◎</span>Unsent Words</div>
    <div class="menu-item" data-target="#garden"><span class="menu-icon">❀</span>Garden</div>
    <div class="menu-item" data-target="#urdu"><span class="menu-icon">ؐ</span>Faiz's Words</div>
    <div class="menu-item" data-target="#nights"><span class="menu-icon">✧</span>Nights You Guard</div>
    <div class="menu-item" data-target="#necklace"><span class="menu-icon">◎</span>Necklace of Moments</div>
    <div class="menu-item" data-target="#map"><span class="menu-icon">⌖</span>The Map</div>
    <div class="menu-item" data-target="#hands"><span class="menu-icon">◎</span>Your Hands</div>
    <div class="menu-item" data-target="#face"><span class="menu-icon">◉</span>Your Beauty</div>
    <div class="menu-item" data-target="#touch"><span class="menu-icon">◎</span>Virtual Touch</div>
    <div class="menu-item" data-target="#stories"><span class="menu-icon">✦</span>Sleep Stories</div>
    <div class="menu-item" data-target="#virtues"><span class="menu-icon">◆</span>Your Heart</div>
    <div class="menu-item" data-target="#firsts"><span class="menu-icon">✧</span>Promise of Firsts</div>
    <div class="menu-item" data-target="#journey"><span class="menu-icon">✧</span>Our Journey</div>
    <div class="menu-item" data-target="#letter"><span class="menu-icon">✉</span>My Letter</div>
    <div class="menu-item" data-target="#final"><span class="menu-icon">♡</span>Forever</div>
  </aside>

  <main class="sanctuary">

    <!-- HERO -->
    <section class="hero" id="top">
      <div class="hero-glow"></div>
      <div class="hero-inner container reveal">
        <div class="hero-eyebrow">A sanctuary built for you</div>
        <h1 class="hero-title">Memoona</h1>
        <p class="hero-subtitle">
          For the girl who holds my heart across miles, who turns my nightmares into dreams, and who is the most beautiful soul I've ever known.
        </p>
        <div class="hero-dedication">
          Crafted with devotion for my Sukoon
        </div>
      </div>
      <div class="scroll-indicator" id="scrollIndicator" role="button" tabindex="0" aria-label="Scroll to next section">
        <span style="font-size: 0.7rem; letter-spacing: 2px; color: var(--warm-gray);">Scroll</span>
        <div class="mouse"><div class="wheel"></div></div>
      </div>
    </section>

    <!-- Timezone Heartbeat -->
    <section class="section timezone-section" id="timezone">
      <div class="container">
        <header class="section-header reveal">
          <div class="section-eyebrow">Synchronized Hearts</div>
          <h2 class="section-title">Our Time Together</h2>
        </header>
        
        <div class="hearts-container reveal">
          <div class="timezone-heart" id="myHeart" data-secret="Every beat of my heart writes your name. You are the rhythm I live by.">
            <div class="heart-beat">♥</div>
            <div class="timezone-label">Me</div>
            <div class="timezone-time" id="myTime">--:--</div>
          </div>
          
          <div class="connection-thread" data-secret="No matter the miles, this thread between us is unbreakable. My soul is tethered to yours."></div>
          
          <div class="timezone-heart" id="herHeart" data-secret="Your heart is the only sound that silences my chaos. I love you beyond measure.">
            <div class="heart-beat" id="herHeartIcon">♥</div>
            <div class="tired-badge" id="tiredBadge">She's tired but she stays</div>
            <div class="timezone-label">You</div>
            <div class="timezone-time" id="herTime">--:--</div>
          </div>
        </div>
        
        <p class="text-center reveal" style="margin-top: 2rem; font-style: italic; opacity: 0.9; padding: 0 1rem; font-size: 0.95rem;">
          "When it's past midnight and you're still awake calming me..."
        </p>
        <p class="text-center reveal" style="margin-top: 0.5rem; font-size: 0.8rem; opacity: 0.7; color: var(--gold);">
          Tap the hearts to hear whispers
        </p>
      </div>
    </section>

    <!-- Close Your Eyes Mode -->
    <section class="section eyes-section" id="eyes">
      <div class="container">
        <header class="section-header reveal">
          <div class="section-eyebrow">Emergency Calm</div>
          <h2 class="section-title" style="color: white;">Close Your Eyes</h2>
        </header>
        
        <div class="text-center reveal" style="color: rgba(255,255,255,0.8); margin-bottom: 2rem; padding: 0 1rem; font-size: 0.95rem;">
          For when anxiety is too loud and you need her voice
        </div>
        
        <div class="text-center reveal">
          <button class="eyes-trigger" id="eyesTrigger" aria-label="Enter calm mode">✦</button>
          <p style="color: rgba(255,255,255,0.5); margin-top: 1rem; font-size: 0.85rem;">
            Tap the glow to enter calm mode
          </p>
        </div>
      </div>
      
      <div class="eyes-overlay" id="eyesOverlay" role="dialog" aria-label="Breathing exercise">
        <div class="breath-text" id="breathText">Breathe in...</div>
        <div style="font-size: 1.1rem; color: rgba(255,255,255,0.7); max-width: 85%; line-height: 1.9; font-style: italic; padding: 0 1rem;" id="calmQuote">
          "I am here. The dark is not empty. I am in it with you."
        </div>
        <div class="breath-instruction">Tap anywhere to exit</div>
      </div>
    </section>

    <!-- POETRY -->
    <section class="section" id="poetry">
      <div class="container">
        <header class="section-header reveal">
          <div class="section-eyebrow">Collected</div>
          <h2 class="section-title">Verses that linger</h2>
        </header>

        <div class="poetry-grid">
          <article class="poetry-card reveal" data-title="Your Voice" data-tag="Comfort" data-full="Your voice is the gentlest place my thoughts can rest — not loud enough to disturb the world, but powerful enough to quiet every storm inside me.">
            <div class="card-icon">✧</div>
            <div class="card-source">Comfort</div>
            <div class="card-content">"Your voice is the gentlest place my thoughts can rest."</div>
            <div class="card-author">— For you</div>
            <div class="card-signature">Aapka Abdullah</div>
          </article>

          <article class="poetry-card reveal" data-title="Abdullah" data-tag="My Name" data-full="When you say 'Abdullah', the whole day becomes kind. It's not just a name in your voice — it's a promise, a prayer, a possession.">
            <div class="card-icon">❋</div>
            <div class="card-source">My Name</div>
            <div class="card-content">"When you say 'Abdullah', the whole day becomes kind."</div>
            <div class="card-author">— Always</div>
            <div class="card-signature">Aapka Abdullah</div>
          </article>

          <article class="poetry-card reveal" data-title="The Nights" data-tag="Guardian" data-full="You stay awake in your city so I can sleep in mine. You fight my demons through a screen, armed with nothing but patience and love.">
            <div class="card-icon">✦</div>
            <div class="card-source">Guardian</div>
            <div class="card-content">"You stay awake in your city so I can sleep in mine."</div>
            <div class="card-author">— Grateful</div>
            <div class="card-signature">Aapka Abdullah</div>
          </article>

          <article class="poetry-card reveal" data-title="Your Eyes" data-tag="Beauty" data-full="In your eyes I find the peace that the world fails to give me. They are my home, my sanctuary, my everything. I could drown in them and die happy.">
            <div class="card-icon">✹</div>
            <div class="card-source">Beauty</div>
            <div class="card-content">"In your eyes I find the peace that the world fails to give me."</div>
            <div class="card-author">— Mesmerized</div>
            <div class="card-signature">Aapka Abdullah</div>
          </article>

          <article class="poetry-card reveal" data-title="The Wait" data-tag="Patience" data-full="Every second away from you is a second too long, but every second of waiting makes our reunion sweeter. I would wait eternity for one moment with you.">
            <div class="card-icon">◔</div>
            <div class="card-source">Patience</div>
            <div class="card-content">"Every second away from you is a second too long..."</div>
            <div class="card-author">— Waiting</div>
            <div class="card-signature">Aapka Abdullah</div>
          </article>

          <article class="poetry-card reveal" data-title="Your Hands" data-tag="Touch" data-full="I dream of your hands — how they would feel in mine, warm and real, erasing the distance between us. I pray for the day I can kiss your fingertips.">
            <div class="card-icon">⚘</div>
            <div class="card-source">Touch</div>
            <div class="card-content">"I dream of your hands — how they would feel in mine..."</div>
            <div class="card-author">— Longing</div>
            <div class="card-signature">Aapka Abdullah</div>
          </article>
        </div>
      </div>
    </section>

    <!-- Poem Modal -->
    <div class="poem-modal" id="poemModal" role="dialog" aria-hidden="true">
      <div class="poem-modal__overlay" id="poemOverlay"></div>
      <div class="poem-modal__panel">
        <button class="poem-modal__close" id="poemClose" aria-label="Close modal">✕</button>
        <div class="poem-modal__tag" id="poemTag">Tag</div>
        <h3 class="poem-modal__title" id="poemTitle">Title</h3>
        <div class="poem-modal__body" id="poemBody"></div>
        <div class="poem-modal__actions">
          <button class="poem-action" id="poemSave">Save to Jar ⚱</button>
          <button class="poem-action secondary" id="poemShare">Copy poem</button>
          <button class="poem-action secondary" id="poemLine" style="flex: 2;">Copy this line ✦</button>
        </div>
      </div>
    </div>

    <!-- MEMORY JAR SECTION -->
    <section class="section jar-section" id="jar">
      <div class="container">
        <header class="section-header reveal">
          <div class="section-eyebrow">Your Collection</div>
          <h2 class="section-title">Memory Jar</h2>
        </header>
        
        <p class="text-center reveal" style="margin-bottom: 1.5rem; opacity: 0.8; font-size: 0.95rem; padding: 0 0.5rem;">
          All the verses you've saved, kept safe in one place.
        </p>
        
        <div class="jar-container reveal">
          <div class="jar-count" id="jarCount" style="display: none;">0</div>
          <div class="jar-visual"></div>
          <div class="jar-items" id="jarItems">
            <div class="jar-empty" id="jarEmpty">
              Your jar is empty.<br>
              <span style="font-size: 0.9rem; opacity: 0.7; display: block; margin-top: 0.5rem;">
                Tap on any poem and select "Save to Jar" to collect your favorite thoughts.
              </span>
            </div>
          </div>
          <div class="jar-secret" id="jarSecret" data-secret="Even when the jar seems empty, my love for you overflows. You are my infinite poetry.">⚱</div>
        </div>
      </div>
    </section>

    <!-- Unsent Messages Graveyard -->
    <section class="section graveyard-section" id="graveyard">
      <div class="container">
        <header class="section-header reveal">
          <div class="section-eyebrow">The Unsaid</div>
          <h2 class="section-title">Messages I Deleted</h2>
        </header>
        
        <p class="text-center reveal" style="margin-bottom: 1.5rem; opacity: 0.8; font-size: 0.95rem; padding: 0 1rem;">
          Texts typed in panic, erased before sending. But you knew anyway.
        </p>
        
        <div class="graveyard-grid reveal">
          <div class="ghost-message" data-reveal="I wanted to say I was falling apart, but you already knew.">
            [Deleted message...]
          </div>
          <div class="ghost-message" data-reveal="I typed 'I can't breathe' but you were already counting for me.">
            [Deleted message...]
          </div>
          <div class="ghost-message" data-reveal="I started to apologize for waking you, but you were already awake.">
            [Deleted message...]
          </div>
          <div class="ghost-message" data-reveal="I wrote 'I'm scared' but you sent a voice note before I could.">
            [Deleted message...]
          </div>
          <div class="ghost-message" data-reveal="I almost said 'don't leave' but you said 'I'm here' first.">
            [Deleted message...]
          </div>
          <div class="ghost-message secret-ghost" data-reveal="I type 'I love you' a thousand times a day, but even that feels insufficient for what I feel. You are my forever.">
            [Deleted message...]
          </div>
        </div>
        
        <p class="graveyard-quote reveal">
          "You read my silences louder than my words."
        </p>
      </div>
    </section>

    <!-- GARDEN - Calming invitation -->
    <section class="section garden-section" id="garden">
      <div class="container">
        <header class="section-header reveal">
          <div class="section-eyebrow">Interactive</div>
          <h2 class="section-title">Plant a little softness</h2>
        </header>
        <div class="garden-container reveal" id="gardenBox" role="button" aria-label="Tap to plant flowers and release stress">
          <div class="garden-instruction">
            Tap anywhere to let your<br>worries bloom into flowers ✿
          </div>
          <div class="garden-zen" id="gardenZen">Breathe... release... peace</div>
        </div>
        <p class="text-center reveal" style="margin-top: 1rem; font-size: 0.9rem; color: var(--warm-gray); font-style: italic;">
          Each flower carries away a worry. Leave them here.
        </p>
      </div>
    </section>

    <!-- URDU - Enhanced Visibility -->
    <section class="section urdu-section" id="urdu">
      <div class="floating-petal" style="left: 10%; animation-delay: 0s;">🌸</div>
      <div class="floating-petal" style="left: 30%; animation-delay: 3s;">✿</div>
      <div class="floating-petal" style="left: 70%; animation-delay: 6s;">🌺</div>
      <div class="floating-petal" style="left: 90%; animation-delay: 9s;">🌸</div>
      
      <div class="container">
        <header class="section-header reveal">
          <div class="section-eyebrow">Faiz Ahmed Faiz</div>
          <h2 class="section-title">The Permanence of You</h2>
        </header>
        
        <div class="urdu-container reveal">
          <div class="urdu-verse">
            <span class="urdu-line">تیری صورت سے ہے عالم میں بہاروں کو ثبات</span>
            <span class="urdu-line">تیری آنکھوں کے سوا دنیا میں رکھا کیا ہے</span>
          </div>
          
          <div class="urdu-divider"></div>
          
          <div class="urdu-transliteration">
            Teri soorat se hai aalam mein bahaaron ko sabaat<br>
            Teri aankhon ke siwa duniya mein rakha kya hai
          </div>
          
          <div class="urdu-meaning">
            "It is your face that lends permanence to springs in this world.<br>
            What else is there in this world, but your eyes?"
          </div>
          
          <div class="urdu-poet">— Faiz Ahmed Faiz</div>
        </div>
      </div>
    </section>

    <!-- NIGHTS YOU GUARD - Fixed -->
    <section class="section nights-section" id="nights">
      <div class="container">
        <header class="section-header reveal">
          <div class="section-eyebrow">Guardian</div>
          <h2 class="section-title">The Nights You Guard</h2>
        </header>
        
        <div class="night-sky reveal" id="nightSky" role="img" aria-label="Starfield of memories">
          <div class="sky-instruction">Tap stars to remember ✦</div>
        </div>
        
        <p class="text-center reveal" style="margin-top: 1.5rem; font-style: italic; opacity: 0.9; padding: 0 1rem;">
          "You stay awake in your city so I can sleep in mine."
        </p>
      </div>
    </section>

    <!-- Necklace of Moments -->
    <section class="section necklace-section" id="necklace">
      <div class="container">
        <header class="section-header reveal">
          <div class="section-eyebrow">Timeline of Salvation</div>
          <h2 class="section-title">Necklace of Moments</h2>
        </header>
        
        <p class="text-center reveal" style="margin-bottom: 0.75rem; opacity: 0.8; font-size: 0.9rem; padding: 0 1rem;">
          Each bead is a timestamp when you saved me. Scroll horizontally.
        </p>
        
        <div class="necklace-container reveal" id="necklaceContainer">
          <div class="moment-bead" data-time="3:47 AM" data-story="Panic attack. You counted my breaths. I fell asleep to your voice.">
            <div class="moment-glow"></div>
            <div class="moment-time">3:47<br>AM</div>
            <div class="moment-thread"></div>
          </div>
          
          <div class="moment-bead" data-time="2:15 AM" data-story="Nightmare. You described the sunrise until I was calm.">
            <div class="moment-glow"></div>
            <div class="moment-time">2:15<br>AM</div>
            <div class="moment-thread"></div>
          </div>
          
          <div class="moment-bead" data-time="4:30 AM" data-story="Anxiety. You stayed on the line for 2 hours.">
            <div class="moment-glow"></div>
            <div class="moment-time">4:30<br>AM</div>
            <div class="moment-thread"></div>
          </div>
          
          <div class="moment-bead" data-time="1:20 AM" data-story="Crying. You cried with me so I wouldn't be alone.">
            <div class="moment-glow"></div>
            <div class="moment-time">1:20<br>AM</div>
            <div class="moment-thread"></div>
          </div>
          
          <div class="moment-bead" data-time="5:00 AM" data-story="You woke up early just to check on me.">
            <div class="moment-glow"></div>
            <div class="moment-time">5:00<br>AM</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Distance Map with secret -->
    <section class="section map-section" id="map">
      <div class="container">
        <header class="section-header reveal">
          <div class="section-eyebrow">The Space Between</div>
          <h2 class="section-title">Until We Meet</h2>
        </header>
        
        <div class="map-visual reveal">
          <div class="map-city">
            <div class="city-dot"></div>
            <div class="city-name">Me</div>
          </div>
          
          <div class="map-thread" data-secret="This line between us is made of gold and resilience. Every inch of it vibrates with my love for you."></div>
          <div class="map-kiss" data-secret="In the space between our lips, I have already kissed you a thousand times.">💋</div>
          
          <div class="map-city">
            <div class="city-dot"></div>
            <div class="city-name">You</div>
          </div>
        </div>
        
        <div class="distance-stats reveal">
          <div class="stat-box">
            <span class="stat-number">∞</span>
            <span class="stat-label">Worth It</span>
          </div>
        </div>
        
        <p class="text-center reveal" style="margin-top: 1.5rem; font-style: italic; color: var(--warm-gray); padding: 0 1rem; font-size: 0.95rem;">
          "In the middle point between our hearts, I have already kissed the air."
        </p>
        <p class="text-center reveal" style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--rose-gold); opacity: 0.8;">
          Tap the thread and kiss to find secrets
        </p>
      </div>
    </section>

    <!-- HANDS -->
    <section class="section hands-section" id="hands">
      <div class="container">
        <header class="section-header reveal">
          <div class="section-eyebrow">Touch</div>
          <h2 class="section-title">Hands I've Only Imagined</h2>
        </header>
        
        <div class="hand-container reveal">
          <div class="hand-particle" style="top: 10%; left: 20%; animation-delay: 0s;"></div>
          <div class="hand-particle" style="top: 30%; right: 10%; animation-delay: 2s;"></div>
          <div class="hand-particle" style="bottom: 20%; left: 15%; animation-delay: 4s;"></div>
          <div class="hand-particle" style="top: 60%; right: 25%; animation-delay: 6s;"></div>
          
          <div class="hand-svg-container" id="handContainer">
            <svg class="hand-svg" viewBox="0 0 200 280" fill="none" style="width: 100%; height: 100%;">
              <defs>
                <filter id="glow">
                  <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                  <feMerge>
                    <feMergeNode in="coloredBlur"/>
                    <feMergeNode in="SourceGraphic"/>
                  </feMerge>
                </filter>
              </defs>
              <path class="hand-fill" id="handFill" d="M100 260C80 260 60 240 55 200C50 160 45 130 55 110C60 100 70 105 75 120L80 90C83 75 93 75 95 90L100 70C103 55 113 55 115 70L120 95C123 80 133 80 135 95L140 130C145 110 160 120 155 150C150 190 145 220 130 250C120 265 110 260 100 260Z" fill="rgba(212,165,165,0.1)" stroke="none"/>
              <path class="hand-path" d="M100 260C80 260 60 240 55 200C50 160 45 130 55 110C60 100 70 105 75 120L80 90C83 75 93 75 95 90L100 70C103 55 113 55 115 70L120 95C123 80 133 80 135 95L140 130C145 110 160 120 155 150C150 190 145 220 130 250C120 265 110 260 100 260Z" stroke="var(--rose-gold)" stroke-width="2" fill="none" filter="url(#glow)"/>
              <path class="hand-path" d="M75 120L72 160M95 90L95 140M115 70L115 130M135 95L132 150" opacity="0.4" stroke="var(--rose-gold)" stroke-width="1"/>
            </svg>
            
            <div class="hand-zone" style="top: 18%; left: 18%;" data-text="These fingers type the words that stop my shaking at 3 AM." role="button" aria-label="Hand zone 1"></div>
            <div class="hand-zone" style="top: 10%; left: 42%;" data-text="The hand that holds the phone, holding my sanity together." role="button" aria-label="Hand zone 2"></div>
            <div class="hand-zone" style="top: 15%; right: 12%;" data-text="Fingers that wipe tears I cannot see but feel you wiping." role="button" aria-label="Hand zone 3"></div>
            <div class="hand-zone" style="top: 48%; left: 32%;" data-text="The palm I imagine against my cheek, warm and real." role="button" aria-label="Hand zone 4"></div>
            <div class="hand-zone" style="bottom: 18%; left: 38%;" data-text="Hands that pray for me, and I feel those prayers across the miles." role="button" aria-label="Hand zone 5"></div>
          </div>
          
          <p class="text-center" style="margin-top: 0.75rem; font-size: 0.85rem; color: var(--warm-gray); font-style: italic;">Touch the glowing points ✦</p>
        </div>
      </div>
    </section>

    <!-- FACE -->
    <section class="section face-section" id="face">
      <div class="container">
        <header class="section-header reveal">
          <div class="section-eyebrow">Beauty</div>
          <h2 class="section-title">The Cartography of You</h2>
        </header>
        
        <div class="face-map-container reveal">
          <div class="face-map" id="faceMap">
            <div class="face-feature" style="top: 35%; left: 50%; transform: translateX(-50%);" 
                 data-text="The small, perfect curve of your nose that catches the light when you tilt your head. I have memorized its shadow." role="button" aria-label="Nose"></div>
            <div class="face-feature" style="top: 45%; left: 18%;" 
                 data-text="Your cheeks rise like soft apples when you smile, and I want to touch the screen every time." role="button" aria-label="Left cheek"></div>
            <div class="face-feature" style="top: 45%; right: 18%;" 
                 data-text="The flush on your cheek when you laugh at my jokes — it is my favorite color." role="button" aria-label="Right cheek"></div>
            <div class="face-feature" style="top: 60%; left: 50%; transform: translateX(-50%);" 
                 data-text="The shape of your lips when you say my name, 'Abdullah.' I know its curve by heart." role="button" aria-label="Lips"></div>
            <div class="face-feature" style="top: 72%; left: 50%; transform: translateX(-50%);" 
                 data-text="Your determined chin that holds your face together when you're worried about me." role="button" aria-label="Chin"></div>
            <div class="face-feature" style="top: 28%; left: 28%;" 
                 data-text="Eyes that see through my masks and still choose to stay. Windows to the soul I love." role="button" aria-label="Left eye"></div>
            <div class="face-feature" style="top: 28%; right: 28%;" 
                 data-text="The way they soften when you look at me through the camera — I feel it in my chest." role="button" aria-label="Right eye"></div>
          </div>
        </div>
        
        <p class="text-center reveal" style="margin-top: 1.5rem; font-style: italic; color: var(--warm-gray); font-size: 0.95rem; padding: 0 1rem;">
          "I have mapped your face in my mind — not perfectly, but passionately."
        </p>
      </div>
    </section>

    <!-- Virtual Touch -->
    <section class="section touch-section" id="touch">
      <div class="container">
        <header class="section-header reveal">
          <div class="section-eyebrow">Across The Distance</div>
          <h2 class="section-title">Virtual Touch</h2>
        </header>
        
        <div class="touch-arena reveal">
          <div class="touch-orb" id="myHand" role="button" aria-label="Hold for me">Me</div>
          <div class="touch-line" id="touchLine"></div>
          <div class="touch-orb" id="herHand" role="button" aria-label="Hold for her">You</div>
        </div>
        
        <div class="touch-message" id="touchMessage">I felt that.</div>
        
        <p class="text-center reveal" style="margin-top: 1.5rem; font-style: italic; color: var(--warm-gray); font-size: 0.95rem; padding: 0 1rem;">
          Hold both to connect across the miles
        </p>
      </div>
    </section>

    <!-- Sleep Stories Archive -->
    <section class="section stories-section" id="stories">
      <div class="container">
        <header class="section-header reveal">
          <div class="section-eyebrow">Bedtime Tales</div>
          <h2 class="section-title">Stories You Told Me</h2>
        </header>
        
        <div class="book-container reveal">
          <div class="book-page active" data-page="0">
            <div class="story-title">The Girl Who Waited</div>
            <div class="story-text">
              "Once there was a girl who stayed awake through the night, not because she couldn't sleep, but because someone she loved was scared of the dark. She spoke of stars and soft things until the fear went away..."
            </div>
          </div>
          
          <div class="book-page" data-page="1">
            <div class="story-title">The Boy Who Breathed</div>
            <div class="story-text">
              "There was a boy who forgot how to breathe. But a voice on the phone taught him again — in for four, hold for seven, out for eight. And soon he was breathing in time with her heart..."
            </div>
          </div>
          
          <div class="book-page" data-page="2">
            <div class="story-title">The Distance Between</div>
            <div class="story-text">
              "Two hearts, two cities, one moon. They measured the distance not in miles, but in whispered 'I love you's that traveled through the wires and never lost their way..."
            </div>
          </div>
          
          <div class="book-nav">
            <button class="book-btn" id="prevPage">← Previous</button>
            <span style="color: var(--rose-gold); font-family: 'Montserrat'; font-size: 0.75rem;">Turn page</span>
            <button class="book-btn" id="nextPage">Next →</button>
          </div>
        </div>
      </div>
    </section>

    <!-- VIRTUES -->
    <section class="section virtues-section" id="virtues">
      <div class="container">
        <header class="section-header reveal">
          <div class="section-eyebrow">Character</div>
          <h2 class="section-title">The Person You Are</h2>
        </header>
        
        <div class="crystals-grid reveal">
          <div class="crystal" data-story="You explained three times why I was safe, and you never sighed once.">
            <span class="crystal-icon">🌸</span>
            <div class="crystal-name">Patience</div>
          </div>
          <div class="crystal" data-story="You held your own pain back to carry mine that night.">
            <span class="crystal-icon">🔮</span>
            <div class="crystal-name">Strength</div>
          </div>
          <div class="crystal" data-story="You speak to me like I'm something precious, even when I feel broken.">
            <span class="crystal-icon">🌙</span>
            <div class="crystal-name">Gentleness</div>
          </div>
          <div class="crystal" data-story="You remember the small things. You pay attention like love is your full-time job.">
            <span class="crystal-icon">☀️</span>
            <div class="crystal-name">Devotion</div>
          </div>
        </div>
        
        <div class="virtue-story reveal" id="virtueStory">
          Tap a crystal to see how you shine ✦
        </div>
      </div>
    </section>

    <!-- Promise of Firsts -->
    <section class="section promises-section" id="firsts">
      <div class="container">
        <header class="section-header reveal">
          <div class="section-eyebrow">The Future</div>
          <h2 class="section-title">Firsts I Owe You</h2>
        </header>
        
        <div class="firsts-grid reveal">
          <div class="first-item">
            <div class="first-checkbox" onclick="toggleFirst(this)" role="checkbox" aria-checked="false" tabindex="0"></div>
            <div class="first-text">First hug (the real kind)</div>
          </div>
          <div class="first-item">
            <div class="first-checkbox" onclick="toggleFirst(this)" role="checkbox" aria-checked="false" tabindex="0"></div>
            <div class="first-text">First time holding your hand</div>
          </div>
          <div class="first-item">
            <div class="first-checkbox" onclick="toggleFirst(this)" role="checkbox" aria-checked="false" tabindex="0"></div>
            <div class="first-text">First time seeing your nose crinkle when you laugh</div>
          </div>
          <div class="first-item">
            <div class="first-checkbox" onclick="toggleFirst(this)" role="checkbox" aria-checked="false" tabindex="0"></div>
            <div class="first-text">First time kissing your forehead when you're anxious</div>
          </div>
          <div class="first-item">
            <div class="first-checkbox" onclick="toggleFirst(this)" role="checkbox" aria-checked="false" tabindex="0"></div>
            <div class="first-text">First time falling asleep together in the same time zone</div>
          </div>
          <div class="first-item">
            <div class="first-checkbox" onclick="toggleFirst(this)" role="checkbox" aria-checked="false" tabindex="0"></div>
            <div class="first-text">First time hearing you say "Abdullah" in person</div>
          </div>
        </div>
        
        <p class="text-center reveal" style="margin-top: 1.5rem; font-style: italic; color: var(--warm-gray); padding: 0 1rem; font-size: 0.95rem;">
          "All pending. All coming soon. All worth the wait."
        </p>
      </div>
    </section>

    <!-- JOURNEY -->
    <section class="section journey-section" id="journey">
      <div class="container">
        <header class="section-header reveal">
          <div class="section-eyebrow">Our Story</div>
          <h2 class="section-title">Chapters of Us</h2>
        </header>
        
        <div class="journey-timeline reveal">
          <div class="journey-entry">
            <div class="journey-dot">1</div>
            <div class="journey-content">
              <h3>The Beginning</h3>
              <p>Somewhere between ordinary minutes, you arrived.</p>
            </div>
          </div>
          <div class="journey-entry">
            <div class="journey-dot">2</div>
            <div class="journey-content">
              <h3>The First Panic</h3>
              <p>You didn't run when I showed you my darkness.</p>
            </div>
          </div>
          <div class="journey-entry">
            <div class="journey-dot">3</div>
            <div class="journey-content">
              <h3>The Sleepless Nights</h3>
              <p>You became my lullaby. My nightmare-catcher.</p>
            </div>
          </div>
          <div class="journey-entry">
            <div class="journey-dot">4</div>
            <div class="journey-content">
              <h3>Abdullah</h3>
              <p>You said my name like a promise.</p>
            </div>
          </div>
          <div class="journey-entry">
            <div class="journey-dot">5</div>
            <div class="journey-content">
              <h3>The Waiting</h3>
              <p>Until pixels become skin.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- LETTER -->
    <section class="section letter-section" id="letter">
      <div class="container">
        <header class="section-header reveal">
          <div class="section-eyebrow">Unseal</div>
          <h2 class="section-title">A Letter, Quietly</h2>
        </header>
        
        <div class="envelope-container reveal" id="envelopeContainer" role="button" aria-label="Open envelope">
          <div class="envelope" id="envelope">
            <div class="envelope-front">
              <div class="seal">✦</div>
            </div>
            <div class="envelope-back">
              <div class="letter-paper">
                <div style="font-family: 'Italiana'; font-size: 1.2rem; color: var(--warm-gray); margin-bottom: 0.5rem;">For You, Memoona</div>
                <span style="font-size: 0.7rem; color: var(--rose-gold);">Tap to seal back</span>
                
                <div style="margin-bottom: 1rem; margin-top: 1rem;">
                  <h4 style="margin: 0 0 0.25rem; font-family: 'Montserrat'; font-size: 0.65rem; letter-spacing: 2px; color: var(--rose-gold); font-weight: 600;">What You Do For Me</h4>
                  <p style="margin: 0; font-size: 0.9rem; line-height: 1.6;">You take my panic and return it as peace. You take my nightmares and return them as dreams.</p>
                </div>
                
                <div style="margin-bottom: 1rem;">
                  <h4 style="margin: 0 0 0.25rem; font-family: 'Montserrat'; font-size: 0.65rem; letter-spacing: 2px; color: var(--rose-gold); font-weight: 600;">Your Beauty</h4>
                  <p style="margin: 0; font-size: 0.9rem; line-height: 1.6;">Your nose, perfect and small. Your cheeks that rise when you smile. Your lips that form my name like a prayer.</p>
                </div>
                
                <div style="margin-bottom: 1rem;">
                  <h4 style="margin: 0 0 0.25rem; font-family: 'Montserrat'; font-size: 0.65rem; letter-spacing: 2px; color: var(--rose-gold); font-weight: 600;">My Promise</h4>
                  <p style="margin: 0; font-size: 0.9rem; line-height: 1.6;">I will meet you one day. I will hold those hands. Until then, I am yours, completely.</p>
                </div>
                
                <div style="font-family: 'Cormorant Garamond'; font-style: italic; color: var(--warm-gray); margin-top: 1rem; font-size: 0.95rem;">Aapka Abdullah</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FINAL - Enhanced with rich wishes -->
    <section class="final-section" id="final">
      <div class="container">
        <div class="final-card reveal">
          <div class="final-glow"></div>
          <div class="final-badge">The Soft Ending ✦</div>
          <h2 class="final-title">You Made My World Gentle</h2>
          
          <p class="final-verse">
            "If this page is a journey, then you are the destination."
          </p>
          
          <div class="final-promises">
            <div class="promise">I will listen — even when you're quiet.</div>
            <div class="promise">I will cross the distance — count on it.</div>
            <div class="promise">I will love you in person — soon.</div>
          </div>

          <div class="blessing-container">
            <div class="blessing-urdu">
              میری معمونہ، میری سکون<br>
              ہمیشہ خوش رہو، ہمیشہ آباد رہو
            </div>
            <div class="blessing-text">
              May your days be embroidered with golden hours of joy,<br>
              may sorrow never find the address of your heart,<br>
              may health bloom eternal in your cheeks like spring's first blush,<br>
              may laughter echo in the halls of your being forever,<br>
              may your smile remain the envy of flowers,<br>
              and may love—my love—wrap you always in warmth.<br>
              <em>Ameen.</em>
            </div>
          </div>
          
          <div class="final-actions">
            <button class="heart-btn" id="heartBtn" aria-label="Send love">♡</button>
            <button class="copy-btn" id="copyMsg">Copy Message</button>
          </div>
          
          <div class="final-hidden" id="finalHidden">
            Surprise ✨ <span>Forever isn't scary when it's you.</span>
          </div>
          
          <div class="creator-sign">
            Created with infinite love for Memoona — my Sukoon, my home
          </div>
        </div>
      </div>
    </section>

  </main>

  <div class="toast" id="toast"></div>

  <script>
    // Utility: Throttle function for performance
    function throttle(func, limit) {
      let inThrottle;
      return function(...args) {
        if (!inThrottle) {
          func.apply(this, args);
          inThrottle = true;
          setTimeout(() => inThrottle = false, limit);
        }
      }
    }

    // Toast with cleanup
    const toastEl = document.getElementById("toast");
    let toastTimeout;
    function toast(text) {
      clearTimeout(toastTimeout);
      toastEl.textContent = text;
      toastEl.classList.add("show");
      toastTimeout = setTimeout(() => toastEl.classList.remove("show"), 2500);
    }

    // Haptic feedback helper
    function haptic() {
      if (navigator.vibrate) navigator.vibrate(50);
    }

    // Secret Modal Functions
    function showSecret(title, text) {
      const modal = document.getElementById('secretModal');
      document.getElementById('secretTitle').textContent = title;
      document.getElementById('secretText').textContent = text;
      modal.classList.add('show');
      haptic();
    }

    function closeSecret() {
      document.getElementById('secretModal').classList.remove('show');
    }

    // Menu - Improved accessibility
    const menuBtn = document.getElementById("menuBtn");
    const sideMenu = document.getElementById("sideMenu");
    const menuOverlay = document.getElementById("menuOverlay");
    
    function toggleMenu() {
      const isOpen = sideMenu.classList.contains("open");
      if (isOpen) {
        sideMenu.classList.remove("open");
        menuOverlay.classList.remove("open");
        menuBtn.classList.remove("active");
        menuBtn.setAttribute("aria-expanded", "false");
        sideMenu.setAttribute("aria-hidden", "true");
        document.body.style.overflow = "";
      } else {
        sideMenu.classList.add("open");
        menuOverlay.classList.add("open");
        menuBtn.classList.add("active");
        menuBtn.setAttribute("aria-expanded", "true");
        sideMenu.setAttribute("aria-hidden", "false");
        document.body.style.overflow = "hidden";
      }
    }
    
    menuBtn.addEventListener("click", toggleMenu);
    menuOverlay.addEventListener("click", toggleMenu);
    
    document.querySelectorAll(".menu-item").forEach(item => {
      item.addEventListener("click", () => {
        toggleMenu();
        const target = item.getAttribute("data-target");
        document.querySelector(target)?.scrollIntoView({ behavior: "smooth" });
      });
    });

    // Scroll indicator
    document.getElementById("scrollIndicator")?.addEventListener("click", () => {
      document.getElementById("timezone")?.scrollIntoView({ behavior: "smooth" });
    });

    // Reveal on scroll with IntersectionObserver
    const observerOptions = { 
      threshold: 0.1, 
      rootMargin: "0px 0px -50px 0px" 
    };
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add("in");
          observer.unobserve(entry.target);
        }
      });
    }, observerOptions);
    
    document.querySelectorAll(".reveal").forEach(el => observer.observe(el));

    // Ambient Canvas - Optimized
    const canvas = document.getElementById("ambientCanvas");
    const ctx = canvas.getContext("2d");
    let particles = [];
    let animationId;
    let isVisible = true;
    
    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      particles = Array.from({ length: 20 }, () => ({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        r: Math.random() * 2 + 1,
        vx: (Math.random() - 0.5) * 0.3,
        vy: (Math.random() - 0.5) * 0.3,
        a: Math.random() * 0.5 + 0.1
      }));
    }
    
    function animateCanvas() {
      if (!isVisible) return;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      particles.forEach(p => {
        p.x += p.vx;
        p.y += p.vy;
        if (p.x < 0) p.x = canvas.width;
        if (p.x > canvas.width) p.x = 0;
        if (p.y < 0) p.y = canvas.height;
        if (p.y > canvas.height) p.y = 0;
        
        ctx.beginPath();
        ctx.fillStyle = `rgba(212,165,165,${p.a})`;
        ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
        ctx.fill();
      });
      animationId = requestAnimationFrame(animateCanvas);
    }
    
    document.addEventListener("visibilitychange", () => {
      isVisible = !document.hidden;
      if (isVisible) animateCanvas();
      else cancelAnimationFrame(animationId);
    });
    
    window.addEventListener("resize", throttle(resizeCanvas, 200));
    resizeCanvas();
    animateCanvas();

    // Timezone Heartbeat with secret confessions
    function updateTime() {
      const options = { 
        timeZone: 'Asia/Karachi', 
        hour: '2-digit', 
        minute: '2-digit', 
        hour12: false 
      };
      const pakTime = new Date().toLocaleTimeString('en-US', options);
      
      document.getElementById('myTime').textContent = pakTime;
      document.getElementById('herTime').textContent = pakTime;
      
      const hour = parseInt(pakTime.split(':')[0]);
      const isLate = hour >= 0 && hour < 6;
      const herHeartIcon = document.getElementById('herHeartIcon');
      const tiredBadge = document.getElementById('tiredBadge');
      
      if (isLate) {
        herHeartIcon.classList.add('tired');
        tiredBadge.classList.add('show');
      } else {
        herHeartIcon.classList.remove('tired');
        tiredBadge.classList.remove('show');
      }
    }
    updateTime();
    setInterval(updateTime, 60000);

    // Secret confessions in timezone
    document.querySelectorAll('.timezone-heart').forEach(heart => {
      heart.addEventListener('click', () => {
        const secret = heart.getAttribute('data-secret');
        showSecret('A Heart\'s Whisper', secret);
      });
    });

    document.querySelector('.connection-thread').addEventListener('click', function() {
      showSecret('The Golden Thread', this.getAttribute('data-secret'));
    });

    // Close Your Eyes Mode
    const eyesTrigger = document.getElementById('eyesTrigger');
    const eyesOverlay = document.getElementById('eyesOverlay');
    const breathText = document.getElementById('breathText');
    let breathInterval;
    
    eyesTrigger.addEventListener('click', () => {
      haptic();
      eyesOverlay.classList.add('active');
      eyesOverlay.setAttribute("aria-hidden", "false");
      let breathCycle = 0;
      breathText.textContent = "Breathe in...";
      breathInterval = setInterval(() => {
        if (!eyesOverlay.classList.contains('active')) {
          clearInterval(breathInterval);
          return;
        }
        breathText.textContent = breathCycle % 2 === 0 ? "Breathe out..." : "Breathe in...";
        breathCycle++;
      }, 4000);
    });
    
    eyesOverlay.addEventListener('click', () => {
      eyesOverlay.classList.remove('active');
      eyesOverlay.setAttribute("aria-hidden", "true");
      clearInterval(breathInterval);
    });

    // Poetry Modal & Memory Jar
    const poemModal = document.getElementById("poemModal");
    let currentPoem = {};
    let jarItems = [];
    
    const storage = {
      get: (key) => {
        try {
          return JSON.parse(localStorage.getItem(key)) || [];
        } catch (e) {
          return [];
        }
      },
      set: (key, value) => {
        try {
          localStorage.setItem(key, JSON.stringify(value));
          return true;
        } catch (e) {
          return false;
        }
      }
    };
    
    jarItems = storage.get('memoryJar');
    updateJarDisplay();
    
    document.querySelectorAll(".poetry-card").forEach(card => {
      card.addEventListener("click", () => {
        haptic();
        const title = card.dataset.title;
        const tag = card.dataset.tag;
        const fullText = card.dataset.full;
        const line = card.querySelector(".card-content").textContent.replace(/["']/g, "");
        
        currentPoem = { title, tag, fullText, line, id: Date.now() };
        
        document.getElementById("poemTag").textContent = tag;
        document.getElementById("poemTitle").textContent = title;
        document.getElementById("poemBody").textContent = fullText;
        poemModal.classList.add("open");
        poemModal.setAttribute("aria-hidden", "false");
      });
    });
    
    function closeModal() {
      poemModal.classList.remove("open");
      poemModal.setAttribute("aria-hidden", "true");
    }
    
    document.getElementById("poemOverlay").addEventListener("click", closeModal);
    document.getElementById("poemClose").addEventListener("click", closeModal);
    
    async function copyText(text, successMsg) {
      try {
        await navigator.clipboard.writeText(text);
        toast(successMsg);
        haptic();
      } catch (err) {
        const textArea = document.createElement("textarea");
        textArea.value = text;
        document.body.appendChild(textArea);
        textArea.select();
        try {
          document.execCommand('copy');
          toast(successMsg);
          haptic();
        } catch (e) {
          toast("Failed to copy");
        }
        document.body.removeChild(textArea);
      }
    }
    
    document.getElementById("poemShare").addEventListener("click", () => {
      if (currentPoem.fullText) {
        copyText(currentPoem.fullText, "Poem copied ✨");
      }
    });
    
    document.getElementById("poemLine").addEventListener("click", () => {
      if (currentPoem.line) {
        copyText(currentPoem.line, "Line copied ✦");
      }
    });
    
    document.getElementById("poemSave").addEventListener("click", () => {
      if (currentPoem.title) {
        const exists = jarItems.some(item => 
          item.title === currentPoem.title && item.line === currentPoem.line
        );
        if (exists) {
          toast("Already in your jar ⚱");
          return;
        }
        
        jarItems.push(currentPoem);
        storage.set('memoryJar', jarItems);
        updateJarDisplay();
        toast("Saved to Memory Jar ⚱");
        haptic();
        closeModal();
      }
    });
    
    function updateJarDisplay() {
      const jarContainer = document.getElementById("jarItems");
      const jarCount = document.getElementById("jarCount");
      
      if (jarItems.length > 0) {
        jarCount.textContent = jarItems.length;
        jarCount.style.display = "grid";
      } else {
        jarCount.style.display = "none";
      }
      
      jarContainer.innerHTML = '';
      
      if (jarItems.length === 0) {
        jarContainer.innerHTML = `
          <div class="jar-empty">
            Your jar is empty.<br>
            <span style="font-size: 0.9rem; opacity: 0.7; display: block; margin-top: 0.5rem;">
              Tap on any poem and select "Save to Jar" to collect your favorite thoughts.
            </span>
          </div>
        `;
      } else {
        jarItems.forEach((item, index) => {
          const jarItem = document.createElement("div");
          jarItem.className = "jar-item";
          jarItem.innerHTML = `
            <div class="jar-item-text">${item.line}</div>
            <div class="jar-item-tag">${item.tag} • ${item.title}</div>
            <button class="jar-remove" data-index="${index}" aria-label="Remove from jar">×</button>
          `;
          jarItem.querySelector('.jar-remove').addEventListener('click', (e) => {
            e.stopPropagation();
            removeFromJar(index);
          });
          jarContainer.appendChild(jarItem);
        });
      }
    }
    
    function removeFromJar(index) {
      jarItems.splice(index, 1);
      storage.set('memoryJar', jarItems);
      updateJarDisplay();
      toast("Removed from jar");
      haptic();
    }

    // Jar secret
    document.getElementById('jarSecret').addEventListener('click', function() {
      showSecret('Infinite Love', this.getAttribute('data-secret'));
    });

    // Graveyard with secret love confession
    document.querySelectorAll('.ghost-message').forEach(msg => {
      msg.addEventListener('click', function() {
        haptic();
        this.textContent = this.dataset.reveal;
        this.classList.add('revealed');
        if (this.classList.contains('secret-ghost')) {
          this.classList.add('secret-reveal');
        }
      });
    });

    // Garden - Calming with zen messages
    const gardenBox = document.getElementById("gardenBox");
    const gardenZen = document.getElementById("gardenZen");
    const flowerNotes = [
      "Your worry has become a flower. Let it go.",
      "Breathe in peace, breathe out tension.",
      "This flower carries your stress away.",
      "You are safe here. Always.",
      "Softness blooms where you touch.",
      "Leave your burdens here. I carry them.",
      "Each petal holds a prayer for your peace."
    ];
    
    let lastFlower = 0;
    gardenBox.addEventListener("click", (e) => {
      const now = Date.now();
      if (now - lastFlower < 300) return;
      lastFlower = now;
      
      haptic();
      const rect = gardenBox.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      if (y < 60) return;
      
      // Show zen message occasionally
      if (Math.random() > 0.7) {
        gardenZen.textContent = flowerNotes[Math.floor(Math.random() * flowerNotes.length)];
        gardenZen.classList.add('show');
        setTimeout(() => gardenZen.classList.remove('show'), 3000);
      }
      
      const flower = document.createElement("div");
      flower.className = "flower";
      flower.style.left = (x - 20) + "px";
      flower.style.top = (y - 20) + "px";
      
      for (let i = 0; i < 5; i++) {
        const petal = document.createElement("div");
        petal.className = "flower-petal";
        const angle = (i * 72 * Math.PI) / 180;
        petal.style.left = 12 + Math.cos(angle) * 10 + "px";
        petal.style.top = 12 + Math.sin(angle) * 10 + "px";
        flower.appendChild(petal);
      }
      
      const center = document.createElement("div");
      center.className = "flower-center";
      flower.appendChild(center);
      
      const note = document.createElement("div");
      note.className = "flower-note";
      note.textContent = flowerNotes[Math.floor(Math.random() * flowerNotes.length)];
      flower.appendChild(note);
      
      gardenBox.appendChild(flower);
      setTimeout(() => flower.remove(), 3500);
    });

    // Nights Sky - Fixed with global tooltip
    const nightSky = document.getElementById("nightSky");
    const tooltipContainer = document.getElementById("global-tooltip-container");
    const nightData = [
      { x: 20, y: 25, text: "3 AM panic attack — you counted my breaths until I stopped shaking." },
      { x: 70, y: 20, text: "The nightmare — you stayed on the line describing the sunrise." },
      { x: 45, y: 55, text: "Anxiety — you didn't hang up. You never hang up." },
      { x: 85, y: 40, text: "Insomnia — you told me stories until my eyes closed." },
      { x: 15, y: 65, text: "The tearful night — you cried with me so I wouldn't cry alone." },
      { x: 60, y: 75, text: "You woke up to calm me down, even when you were tired." }
    ];
    
    nightData.forEach((night) => {
      const star = document.createElement("div");
      star.className = "star";
      star.style.left = night.x + "%";
      star.style.top = night.y + "%";
      star.setAttribute("role", "button");
      star.setAttribute("aria-label", "View memory");
      
      star.addEventListener("click", (e) => {
        e.stopPropagation();
        haptic();
        
        // Clear existing
        tooltipContainer.querySelectorAll('.star-log').forEach(el => el.remove());
        
        // Create centered popup instead of absolute positioning
        const popup = document.createElement("div");
        popup.className = "hand-popup"; // Reuse hand-popup styling for consistency
        popup.style.cssText = "position: fixed; left: 50%; top: 50%; transform: translate(-50%, -50%); width: min(300px, 85vw); z-index: 3000;";
        popup.textContent = night.text;
        tooltipContainer.appendChild(popup);
        
        setTimeout(() => popup.remove(), 4000);
      });
      
      nightSky.appendChild(star);
    });

    // Necklace of Moments
    const momentPopup = document.getElementById('momentPopup');
    const momentTitle = document.getElementById('momentTitle');
    const momentText = document.getElementById('momentText');
    
    document.querySelectorAll('.moment-bead').forEach(bead => {
      bead.addEventListener('click', () => {
        haptic();
        momentTitle.textContent = bead.dataset.time;
        momentText.textContent = bead.dataset.story;
        momentPopup.classList.add('show');
        
        setTimeout(() => {
          momentPopup.classList.remove('show');
        }, 4000);
      });
    });

    // Distance Map secrets
    document.querySelector('.map-thread').addEventListener('click', function() {
      showSecret('Connection', this.getAttribute('data-secret'));
    });
    
    document.querySelector('.map-kiss').addEventListener('click', function() {
      showSecret('A Kiss', this.getAttribute('data-secret'));
    });

    // Hands
    const handZones = document.querySelectorAll(".hand-zone");
    
    handZones.forEach((zone) => {
      zone.addEventListener("click", (e) => {
        e.stopPropagation();
        haptic();
        zone.classList.add("active");
        
        tooltipContainer.querySelectorAll(".hand-popup").forEach(el => el.remove());
        
        const popup = document.createElement("div");
        popup.className = "hand-popup";
        popup.textContent = zone.dataset.text;
        tooltipContainer.appendChild(popup);
        
        setTimeout(() => {
          popup.remove();
          zone.classList.remove("active");
        }, 4000);
      });
    });

    // Face Cartography
    const faceFeatures = document.querySelectorAll(".face-feature");
    
    faceFeatures.forEach(feature => {
      feature.addEventListener("click", (e) => {
        e.stopPropagation();
        haptic();
        
        tooltipContainer.querySelectorAll(".face-tooltip").forEach(el => el.remove());
        
        const tooltip = document.createElement("div");
        tooltip.className = "face-tooltip";
        tooltip.textContent = feature.dataset.text;
        
        tooltipContainer.appendChild(tooltip);
        
        setTimeout(() => tooltip.remove(), 4000);
      });
    });

    // Clear tooltips on scroll
    window.addEventListener('scroll', throttle(() => {
      tooltipContainer.innerHTML = "";
    }, 100));

    // Virtual Touch
    const myHand = document.getElementById('myHand');
    const herHand = document.getElementById('herHand');
    const touchLine = document.getElementById('touchLine');
    const touchMessage = document.getElementById('touchMessage');
    let myHandTouched = false;
    let herHandTouched = false;
    
    function updateTouchLine() {
      if (myHandTouched && herHandTouched) {
        touchLine.classList.add('connected');
        touchMessage.classList.add('show');
        haptic();
        if (navigator.vibrate) navigator.vibrate([50, 100, 50]);
        setTimeout(() => {
          touchMessage.classList.remove('show');
        }, 3000);
      } else {
        touchLine.classList.remove('connected');
      }
    }
    
    function addTouchListeners(element, isMine) {
      const start = (e) => {
        e.preventDefault();
        if (isMine) myHandTouched = true;
        else herHandTouched = true;
        element.classList.add('touched');
        updateTouchLine();
      };
      
      const end = (e) => {
        e.preventDefault();
        if (isMine) myHandTouched = false;
        else herHandTouched = false;
        element.classList.remove('touched');
        updateTouchLine();
      };
      
      element.addEventListener('mousedown', start);
      element.addEventListener('mouseup', end);
      element.addEventListener('mouseleave', end);
      element.addEventListener('touchstart', start, { passive: false });
      element.addEventListener('touchend', end);
    }
    
    addTouchListeners(myHand, true);
    addTouchListeners(herHand, false);

    // Sleep Stories
    const pages = document.querySelectorAll('.book-page');
    let currentPage = 0;
    
    function showPage(index) {
      pages[currentPage].classList.remove('active');
      currentPage = (index + pages.length) % pages.length;
      pages[currentPage].classList.add('active');
      haptic();
    }
    
    document.getElementById('nextPage').addEventListener('click', () => showPage(currentPage + 1));
    document.getElementById('prevPage').addEventListener('click', () => showPage(currentPage - 1));

    // Virtues
    const crystals = document.querySelectorAll(".crystal");
    const virtueStory = document.getElementById("virtueStory");
    
    crystals.forEach(crystal => {
      crystal.addEventListener("click", function() {
        haptic();
        crystals.forEach(c => c.style.background = "rgba(255,255,255,0.8)");
        this.style.background = "rgba(212,165,165,0.3)";
        virtueStory.textContent = this.dataset.story;
      });
    });

    // Promise of Firsts
    window.toggleFirst = function(checkbox) {
      haptic();
      const isChecked = checkbox.classList.toggle('checked');
      checkbox.textContent = isChecked ? '✓' : '';
      checkbox.setAttribute("aria-checked", isChecked);
      checkbox.closest('.first-item').classList.toggle('complete');
    };
    
    document.querySelectorAll('.first-checkbox').forEach(box => {
      box.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          toggleFirst(box);
        }
      });
    });

    // Envelope
    const envelope = document.getElementById("envelope");
    document.getElementById("envelopeContainer").addEventListener("click", () => {
      haptic();
      envelope.classList.toggle("open");
    });

    // Emergency Button
    const emergencyBtn = document.getElementById('emergencyBtn');
    const emergencyOverlay = document.getElementById('emergencyOverlay');
    const emergencyProgress = document.getElementById('emergencyProgress');
    let emergencyTimer;
    let progressInterval;
    let progress = 0;
    
    function startEmergency(e) {
      e.preventDefault();
      emergencyBtn.classList.add('holding');
      progress = 0;
      
      progressInterval = setInterval(() => {
        progress += 2;
        emergencyProgress.style.setProperty('--progress', progress + '%');
        if (progress >= 100) progress = 0;
      }, 20);
      
      emergencyTimer = setTimeout(() => {
        emergencyOverlay.classList.add('active');
        emergencyBtn.classList.remove('holding');
        clearInterval(progressInterval);
        haptic();
        if (navigator.vibrate) navigator.vibrate(200);
      }, 2000);
    }
    
    function cancelEmergency(e) {
      e.preventDefault();
      clearTimeout(emergencyTimer);
      clearInterval(progressInterval);
      emergencyBtn.classList.remove('holding');
      emergencyProgress.style.setProperty('--progress', '0%');
    }
    
    emergencyBtn.addEventListener('touchstart', startEmergency, { passive: false });
    emergencyBtn.addEventListener('touchend', cancelEmergency);
    emergencyBtn.addEventListener('mousedown', startEmergency);
    emergencyBtn.addEventListener('mouseup', cancelEmergency);
    emergencyBtn.addEventListener('mouseleave', cancelEmergency);
    
    emergencyOverlay.addEventListener('click', () => {
      emergencyOverlay.classList.remove('active');
      emergencyBtn.style.opacity = '0.2';
    });

    // Final Heart
    let heartClicks = 0;
    document.getElementById("heartBtn").addEventListener("click", function() {
      haptic();
      this.textContent = this.textContent === "♡" ? "♥" : "♡";
      heartClicks++;
      if (heartClicks >= 3) {
        document.getElementById("finalHidden").classList.add("show");
      }
      
      for (let i = 0; i < 3; i++) {
        setTimeout(() => {
          const heart = document.createElement("div");
          heart.className = "floating-heart";
          heart.textContent = "♥";
          heart.style.left = (Math.random() * window.innerWidth) + "px";
          heart.style.top = (window.innerHeight - 100) + "px";
          document.body.appendChild(heart);
          setTimeout(() => heart.remove(), 3000);
        }, i * 150);
      }
    });

    document.getElementById("copyMsg").addEventListener("click", () => {
      const msg = "Happy Valentine's, my love. Your voice is my favourite sound — especially when you say Abdullah. You are my home across the distance.";
      copyText(msg, "Message copied ✨");
    });

    // Show emergency button after scroll
    const scrollHandler = throttle(() => {
      if (window.scrollY > 300) {
        emergencyBtn.classList.add('visible');
      } else {
        emergencyBtn.classList.remove('visible');
      }
    }, 100);
    
    window.addEventListener('scroll', scrollHandler, { passive: true });
  </script>
</body>
</html>
